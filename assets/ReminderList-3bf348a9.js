import{_ as I,o as l,c as d,F as y,j as C,i as m,a as e,t as f,n as R,s as G,p as M,k as L,u as T,f as v,g as w,r as _,b as g,w as b,h as D}from"./index-5d175349.js";import{L as B,D as A}from"./Layout-feaff5d7.js";import{C as V,S as O,P as z,_ as j}from"./adjustments-5072e001.js";import{T as q}from"./TextArea-d58f5809.js";import{L as H}from"./Label-d788184e.js";import{_ as W,a as Y}from"./trash-bad6200c.js";import{_ as J}from"./edit-51d5eb37.js";import{M as K}from"./Modal-21c40316.js";import{_ as Q}from"./no-data-9a9520f2.js";import"./OverLaye-142172c4.js";import"./search-0186349c.js";const X={props:{list:Array,loading:Boolean},data(){return{showStatus:[]}},mounted(){document.addEventListener("click",this.closeStatusOnClickOutside)},beforeUnmount(){document.removeEventListener("click",this.closeStatusOnClickOutside)},methods:{closeStatusOnClickOutside(t){t.target.closest(".user-status")||this.closeStatus()},deleteItem(t){this.showStatus=[],this.$emit("delete_item",t)},editItem(t){this.showStatus=[],this.$emit("edit_item",t)},editStatus(t,s){this.$emit("edit_status",t,s),this.showStatus=[]},statusShow(t){this.showStatus=[],this.showStatus[t]=!this.showStatus[t]},closeStatus(){this.showStatus=[]}}},i=t=>(M("data-v-ce803ba6"),t=t(),L(),t),Z={key:0},ee=i(()=>e("td",{class:"count skeleton-element"},null,-1)),te=i(()=>e("td",{class:"user_name skeleton-element"},null,-1)),se=i(()=>e("td",{class:"user_number skeleton-element"},null,-1)),oe=i(()=>e("td",{class:"user_address skeleton-element"},null,-1)),ae=i(()=>e("td",{class:"blank"},null,-1)),re=i(()=>e("td",{class:"user-status relative skeleton-element"},null,-1)),ne=i(()=>e("td",{class:"dropdown skeleton-element"},null,-1)),le=[ee,te,se,oe,ae,re,ne],ie={key:0},de={class:"count"},ce={class:"gap-8px text-sm_regular color-Grey_90"},_e={class:"user_name"},me={class:"display-flex align-center gap-14px"},ue={class:"text-sm_regular color-Grey_90"},pe={class:"user_number"},he={class:"text-sm_regular color-Grey_90"},ge={class:"user_address"},be={class:"text-sm_regular color-Grey_90 line-clamp-1"},we=i(()=>e("td",{class:"blank"},null,-1)),ye={class:"user-status relative"},ke=["onClick"],fe={class:"text-sm_medium color-Grey_60 capitalize"},ve=["onClick"],Se=i(()=>e("div",{class:"dropdown-link"},[e("p",{class:"dropdown-link-title capitalize"}," pending ")],-1)),De=[Se],xe=["onClick"],Ce=i(()=>e("div",{class:"dropdown-link"},[e("p",{class:"dropdown-link-title capitalize"}," unanswered ")],-1)),Ie=[Ce],Me=["onClick"],Le=i(()=>e("div",{class:"dropdown-link"},[e("p",{class:"dropdown-link-title capitalize"}," complete ")],-1)),Pe=[Le],$e={class:"dropdown"},Fe={class:"icon-btn icon-btn_32px custom-dropdown"},Ue=i(()=>e("img",{src:W},null,-1)),Ne={class:"custom-dropdown-list leftside icon-dropdown"},Ee=["onClick"],Re=i(()=>e("div",{class:"dropdown-link"},[e("img",{src:J}),e("p",{class:"dropdown-link-title"}," Edit Follow Up ")],-1)),Ge=[Re],Te=["onClick"],Be=i(()=>e("div",{class:"dropdown-link"},[e("img",{src:Y}),e("p",{class:"dropdown-link-title required"}," Delete Follow Up ")],-1)),Ae=[Be];function Ve(t,s,o,p,a,r){return l(),d(y,null,[(l(),d(y,null,C(6,(n,h)=>(l(),d(y,{key:h},[o.loading?(l(),d("tr",Z,le)):m("",!0)],64))),64)),(l(!0),d(y,null,C(o.list,(n,h)=>(l(),d(y,{key:h},[o.loading?m("",!0):(l(),d("tr",ie,[e("td",de,[e("p",ce,f(h+1),1)]),e("td",_e,[e("div",me,[e("p",ue,f(n.rem_cus),1)])]),e("td",pe,[e("p",he,f(n.rem_date),1)]),e("td",ge,[e("p",be,f(n.rem_notes),1)]),we,e("td",ye,[e("button",{class:"btn-regular display-flex align-center gap-8px",onClick:u=>r.statusShow(h)},[e("div",{class:R(["ellipse-dot",{"bg-emerald":n.rem_status_id===3,"bg-orange":n.rem_status_id===2,"bg-Grey_40":n.rem_status_id===1}])},null,2),e("p",fe,f(n.rem_status),1)],8,ke),a.showStatus[h]&&n.rem_status_id!==3?(l(),d("ul",{key:0,class:"custom-dropdown-list",onClick:s[0]||(s[0]=G((...u)=>r.closeStatus&&r.closeStatus(...u),["self"]))},[e("li",{class:"dropdown-item",onClick:u=>r.editStatus(n.rem_id,1)},De,8,ve),e("li",{class:"dropdown-item",onClick:u=>r.editStatus(n.rem_id,2)},Ie,8,xe),e("li",{class:"dropdown-item",onClick:u=>r.editStatus(n.rem_id,3)},Pe,8,Me)])):m("",!0)]),e("td",$e,[e("div",Fe,[Ue,e("ul",Ne,[e("li",{class:"dropdown-item",onClick:u=>r.editItem(n.rem_id)},Ge,8,Ee),e("li",{class:"dropdown-item",onClick:u=>r.deleteItem(n.rem_id)},Ae,8,Te)])])])]))],64))),128))],64)}const Oe=I(X,[["render",Ve],["__scopeId","data-v-ce803ba6"]]);const S="https://devapi.billionbuild.com",ze={components:{Layout:B,ContentSection:V,SearchBox:O,Pagination:z,DeleteModel:A,reminderRow:Oe,Modal:K,TextArea:q,Label:H},data(){return{breadcrumbList:[{name:"Dashboard",link:"/"},{name:"Follow Ups"}],list:[],currentPage:1,totalPages:1,sort:"desc",deleteItemModal:!1,itemId:"",remDate:"",remNote:"",reminderModal:!1,attributes:[],listLoading:!1,listEmpty:!1}},created(){this.reminderData();const t=T(),s="Follow Up List |  Billion Build",o="this is description for Follow Up List";t.chnageTitle(s,o)},computed:{remBtnDisabled(){const t=/[!@#$%^&*()?":{}|<>]/;return!this.remDate||!this.remNote.trim()||t.test(this.remNote)},formattedDate(){const t=new Date(this.remDate),s=t.getFullYear(),o=`0${t.getMonth()+1}`.slice(-2),p=`0${t.getDate()}`.slice(-2),a=`0${t.getHours()}`.slice(-2),r=`0${t.getMinutes()}`.slice(-2),n=`0${t.getSeconds()}`.slice(-2);return`${s}-${o}-${p} ${a}:${r}:${n}`}},methods:{updatePage(t){this.currentPage=t,this.reminderData()},changesort(){this.sort=this.sort==="desc"?"asc":"desc",this.reminderData()},async reminderData(){this.listLoading=!0,this.listEmpty=!1;var t=new FormData;t.append("rem_id",""),t.append("sort",this.sort),t.append("page_no",this.currentPage);try{const s=await v.post(`${S}/reminder-list`,t);s.data&&s.data.length!==0?(this.listLoading=!1,this.list=s.data,this.totalPages=s.total_pages):(this.listEmpty=!0,this.totalPages=1,w().error(s.message))}catch(s){w().error(s)}},async statusUpdate(t,s){var o=new FormData;o.append("rem_id",t),o.append("rem_status",s);try{(await v.post(`${S}/reminder-status`,o)).success===1&&this.reminderData()}catch(p){w().error(p)}},getItemId(t){this.deleteItemModal=!0,this.itemId=t},editItem(t){this.itemId=t,this.reminderModal=!0,this.getReminderData(t)},async getReminderData(t){var s=new FormData;s.append("rem_id",t),s.append("sort",this.sort),s.append("page_no",this.currentPage);try{const o=await v.post(`${S}/reminder-list`,s);this.totalPages=o.total_pages,o.success===1&&(this.remNote=o.data.rem_notes,this.remDate=o.data.rem_date,this.attributes={content:"blue",highlight:!0,dot:!0,bar:!1,popover:{title:"Reminder",label:o.data.rem_notes},dates:new Date(o.data.rem_date),order:1,time:new Date(o.data.rem_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})}catch(o){w().error(o)}},dateTimeFormatter(t){const s={year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(t).toLocaleString([],s)},async addReminder(){var t=new FormData;t.append("rem_id",this.itemId),t.append("rem_self",""),t.append("cus_id",this.itemId),t.append("rem_notes",this.remNote);const s=this.formattedDate;t.append("rem_date",s);try{(await v.post(`${S}/add-reminder`,t)).success===1&&(this.reminderModal=!1,this.reminderData())}catch(o){w().error(o)}},async deleteItem(){var t=new FormData;t.append("rem_id",this.itemId);try{(await v.post(`${S}/reminder-delete`,t)).success===1&&(this.reminderData(),this.deleteItemModal=!1)}catch(s){w().error(s)}}}},k=t=>(M("data-v-699b98d7"),t=t(),L(),t),je=k(()=>e("div",{class:"w-100 margin-bottom_12px"},[e("h2",{class:"title"},"Follow Up List")],-1)),qe=k(()=>e("div",{class:"table-options w-100"},null,-1)),He={class:"table-options w-100 justify-end"},We=k(()=>e("img",{src:j},null,-1)),Ye={key:0},Je={key:1},Ke={key:0,class:"data-not-found border-b border-Grey_20 border-solid"},Qe=k(()=>e("img",{src:Q},null,-1)),Xe=[Qe],Ze={key:1,class:"w-100 user-table"},et=k(()=>e("tr",null,[e("td",{class:"count"},[e("p",{class:"gap-8px text-base_semibold color-Grey_50"},"No.")]),e("td",{class:"user_name"},[e("div",{class:"display-flex align-center gap-14px"},[e("p",{class:"text-base_semibold color-Grey_50"},"Customer Name")])]),e("td",{class:"user_number"},[e("p",{class:"text-base_semibold color-Grey_50"},"Date & Time")]),e("td",{class:"user_address"},[e("p",{class:"text-base_semibold color-Grey_50 line-clamp-1"},"Note")]),e("td",{class:"blank"}),e("td",{class:"user-status relative"},[e("p",{class:"text-base_semibold color-Grey_50 line-clamp-1"},"Follow Up status")]),e("td",{class:"dropdown"},[e("div",{class:"icon-btn icon-btn_32px custom-dropdown"})])],-1)),tt=k(()=>e("h4",null,"Add Follow Up",-1)),st={class:"padding-y_12px padding-x_16px"},ot={class:"space-y-4"},at={class:"space-y-8px col-span-1"},rt={class:"space-y-8px col-span-2"},nt=["disabled"];function lt(t,s,o,p,a,r){const n=_("reminderRow"),h=_("Pagination"),u=_("ContentSection"),x=_("Label"),P=_("VDatePicker"),$=_("ErrorMessage"),F=_("TextArea"),U=_("Modal"),N=_("Layout"),E=_("DeleteModel");return l(),d(y,null,[g(N,{breadcrumb:a.breadcrumbList},{default:b(()=>[g(u,null,{"table-header":b(()=>[je,qe,e("div",He,[e("button",{class:"btn-regular display-flex align-center gap-8px",onClick:s[0]||(s[0]=c=>r.changesort())},[We,a.sort==="asc"?(l(),d("span",Ye,"Newest")):m("",!0),a.sort==="desc"?(l(),d("span",Je,"Oldest")):m("",!0)])])]),"main-table":b(()=>[a.listEmpty?(l(),d("div",Ke,Xe)):m("",!0),a.listEmpty?m("",!0):(l(),d("table",Ze,[e("tbody",null,[et,g(n,{list:a.list,onDelete_item:r.getItemId,onEdit_item:r.editItem,onEdit_status:r.statusUpdate,loading:a.listLoading},null,8,["list","onDelete_item","onEdit_item","onEdit_status","loading"])])]))]),"table-footer":b(()=>[g(h,{currentPage:a.currentPage,totalPages:a.totalPages,onUpdatePage:r.updatePage},null,8,["currentPage","totalPages","onUpdatePage"])]),_:1}),a.reminderModal?(l(),D(U,{key:0,onCloseModal:s[5]||(s[5]=c=>this.reminderModal=!this.reminderModal)},{header:b(()=>[tt]),footer:b(()=>[e("button",{class:"btn-regular",onClick:s[3]||(s[3]=c=>this.reminderModal=!this.reminderModal)},"Cancel"),e("button",{class:"btn-regular",disabled:r.remBtnDisabled,onClick:s[4]||(s[4]=(...c)=>r.addReminder&&r.addReminder(...c))},"Update",8,nt)]),default:b(()=>[e("div",st,[e("div",ot,[e("div",at,[g(x,{label:"Select Date"}),g(P,{modelValue:a.remDate,"onUpdate:modelValue":s[1]||(s[1]=c=>a.remDate=c),color:"sky-blue",attributes:a.attributes,mode:"dateTime",onChange:t.highlightSelectedDate,expanded:"",formatter:r.dateTimeFormatter},null,8,["modelValue","attributes","onChange","formatter"]),!a.remDate&&t.formSubmitted?(l(),D($,{key:0,msg:""})):m("",!0)]),e("div",rt,[g(x,{label:"Note (optional)"}),g(F,{placeholder:"Enter Reminder Note",id:"Note (optional)",value:a.remNote,onInput:s[2]||(s[2]=c=>a.remNote=c.target.value)},null,8,["value"])])])])]),_:1})):m("",!0)]),_:1},8,["breadcrumb"]),a.deleteItemModal?(l(),D(E,{key:0,model_title:"Delete Follow Up",model_subtitle:"Are you sure you want to delete this Follow Up?",onClose_model:s[6]||(s[6]=c=>a.deleteItemModal=!1),onDelete_item:s[7]||(s[7]=c=>r.deleteItem())})):m("",!0)],64)}const yt=I(ze,[["render",lt],["__scopeId","data-v-699b98d7"]]);export{yt as default};
