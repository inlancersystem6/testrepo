import{L as S}from"./Layout-2b061d19.js";import{C as w}from"./ContentSection2-71811219.js";import{L as A}from"./Label-6fa8bffa.js";import{I as E}from"./Input-0af68294.js";import{E as M}from"./ErrorMessage-e6ac3a24.js";import{h as f,i as b,r as i,o as a,c as g,w as y,j as c,a as s,f as j,d,e as x,F as v,t as _,b as B}from"./index-78b395c4.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import"./OverLaye-908016db.js";const k="https://devapi.billionbuild.com",F={components:{Layout:S,ContentSection:w,Label:A,Input:E,ErrorMessage:M},computed:{btnDisabled(){return!this.roleName.trim()}},data(){return{formSubmitted:!1,roleName:"",permissionsList:[],checked:"",checkedPermissions:[]}},created(){this.featchPermissionsList()},methods:{async featchPermissionsList(){var t=new FormData;try{const e=await f.post(`${k}/permission-list`,t);this.permissionsList=e.data}catch(e){b().error(e)}},updateCheckedPermissions(t){const e=this.checkedPermissions.indexOf(t);e!==-1?this.checkedPermissions.splice(e,1):this.checkedPermissions.push(t)},async addRole(){const t=this.checkedPermissions.join(",");var e=new FormData;e.append("role_id",""),e.append("role_name",this.roleName),e.append("role_permission",t);try{(await f.post(`${k}/role-add-or-edit`,e)).success===1&&this.$router.push({name:"Roles"})}catch(n){b().error(n)}}}},V={class:"col-8"},z={class:"address-form"},G={class:"space-y-8px"},I={class:"space-y-8px col-span-2"},O={class:"margin-top_16px display-flex align-center gap-20px Lg_flex-wrap"},T={class:"text-small_semibold color-Grey_50 text-capitalize w_140px"},U={class:"display-flex align-center gap-18px justify-between Md_w-100 Mobile_grid-cols-2 Mobile_display-grid"},W={class:"custom-toogle-btn display-flex align-center gap-8px"},q=["onChange","id"],H=["for"],J=["disabled"];function K(t,e,n,L,o,l){const u=i("Label"),N=i("Input"),C=i("ErrorMessage"),P=i("ContentSection"),R=i("Layout");return a(),g(R,null,{default:y(()=>[c(P,{title:"Add Role"},{default:y(()=>[s("div",V,[s("div",z,[s("div",G,[c(u,{label:"Role Name"}),c(N,{placeholder:"Enter Role Name",id:"Role Name",value:o.roleName,onInput:e[0]||(e[0]=r=>o.roleName=r.target.value)},null,8,["value"]),!o.roleName&&o.formSubmitted?(a(),g(C,{key:0,msg:""})):j("",!0)]),s("div",I,[c(u,{label:"Add Permissions"}),(a(!0),d(v,null,x(o.permissionsList,(r,p)=>(a(),d("div",{key:p},[s("div",O,[s("p",T,_(r.name)+" permission:-",1),s("div",U,[(a(!0),d(v,null,x(r.permissions,(h,m)=>(a(),d("div",{key:m,class:"img-not-selected"},[s("div",W,[s("input",{type:"checkbox",class:"form-toogle-btn",onChange:Q=>l.updateCheckedPermissions(h.permission_id),id:p+"_"+m},null,40,q),B(" "+_(o.checked)+" ",1),s("label",{class:"text-capitalize text-large_semibold color-Grey_90",for:p+"_"+m},_(h.permission_name),9,H)])]))),128))])])]))),128))])]),s("button",{type:"submit",class:"btn-regular margin-top_24px",disabled:l.btnDisabled,onClick:e[1]||(e[1]=(...r)=>l.addRole&&l.addRole(...r))},"Add Role ",8,J)])]),_:1})]),_:1})}const re=D(F,[["render",K],["__scopeId","data-v-8c87529d"]]);export{re as default};
