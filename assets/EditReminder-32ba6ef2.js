import{_ as N,u as v,f as m,g as p,r as s,o as u,h,w as _,b as n,a as c,i as $}from"./index-5d175349.js";import{L as w}from"./Layout-feaff5d7.js";import{C as x}from"./ContentSection2-cea15362.js";import{L as C}from"./Label-d788184e.js";import{I as k}from"./Input-d28165ea.js";import{E as I}from"./ErrorMessage-d5a29056.js";import{T as L}from"./TextArea-d58f5809.js";import"./OverLaye-142172c4.js";const b="https://devapi.billionbuild.com",T={components:{Layout:w,ContentSection:x,Label:C,Input:k,ErrorMessage:I,TextArea:L},data(){return{remNote:"",customerId:"",remDate:"",attributes:[]}},created(){const e=v(),t="Follow Up |  Billion Build",o="this is description for Follow Up";e.chnageTitle(t,o),this.customerId=this.$route.params.reminderId,this.reminderData()},computed:{formattedDate(){const e=new Date(this.remDate),t=e.getFullYear(),o=`0${e.getMonth()+1}`.slice(-2),l=`0${e.getDate()}`.slice(-2),r=`0${e.getHours()}`.slice(-2),a=`0${e.getMinutes()}`.slice(-2),i=`0${e.getSeconds()}`.slice(-2);return`${t}-${o}-${l} ${r}:${a}:${i}`},btnDisabled(){const e=/[!@#$%^&*()?":{}|<>]/;return!this.remDate||!this.remNote.trim()||e.test(this.remNote)}},methods:{highlightSelectedDate(){this.attributes=[],this.attributes.push({content:"black",highlight:!0,dot:!0,bar:!0,popover:{title:"Selected Date",body:"This is the selected date"},dates:new Date(this.remDate),order:0})},async reminderData(){var e=new FormData;e.append("rem_id",this.customerId),e.append("sort",this.sort),e.append("page_no",this.currentPage);try{const t=await m.post(`${b}/reminder-list`,e);this.totalPages=t.total_pages,t.success===1&&(this.remNote=t.data.rem_notes,this.remDate=t.data.rem_date,this.attributes={content:"black",highlight:!0,dot:!0,bar:!0,popover:{title:"Selected Date",label:this.remNote},dates:new Date(this.remDate),order:0})}catch(t){p().error(t)}},async addReminder(){var e=new FormData;e.append("rem_id",this.customerId),e.append("rem_self",""),e.append("cus_id",this.customerId),e.append("rem_notes",this.remNote);const t=this.formattedDate;e.append("rem_date",t);try{(await m.post(`${b}/add-reminder`,e)).success===1&&this.$router.push({name:"ReminderList"})}catch(o){p().error(o)}}}},V={class:"grid grid-cols-3 gap-20"},E={class:"space-y-8px col-span-1"},F={class:"space-y-8px col-span-2"},R=["disabled"];function U(e,t,o,l,r,a){const i=s("Label"),g=s("VDatePicker"),D=s("ErrorMessage"),f=s("TextArea"),S=s("ContentSection"),y=s("Layout");return u(),h(y,null,{default:_(()=>[n(S,{title:"Edit Follow Up"},{default:_(()=>[c("div",V,[c("div",E,[n(i,{label:"Select Date"}),n(g,{modelValue:r.remDate,"onUpdate:modelValue":t[0]||(t[0]=d=>r.remDate=d),color:"sky-blue",attributes:r.attributes,mode:"dateTime",onChange:a.highlightSelectedDate,expanded:""},null,8,["modelValue","attributes","onChange"]),!r.remDate&&e.formSubmitted?(u(),h(D,{key:0,msg:""})):$("",!0)]),c("div",F,[n(i,{label:"Note (optional)"}),n(f,{placeholder:"Enter Reminder Note",id:"Note (optional)",value:r.remNote,onInput:t[1]||(t[1]=d=>r.remNote=d.target.value)},null,8,["value"])])]),c("button",{type:"submit",class:"btn-regular margin-top_8px",disabled:a.btnDisabled,onClick:t[2]||(t[2]=d=>a.addReminder())},"Update",8,R)]),_:1})]),_:1})}const q=N(T,[["render",U]]);export{q as default};
