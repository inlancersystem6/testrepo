import{o as d,c as m,F as k,r as U,b as f,a as t,t as x,p as z,d as J,m as re,f as M,u as P,e as h,g,w as S,h as A,i as ne}from"./index-31e5b7a2.js";import{L as ae,D as ie}from"./Layout-c0e45365.js";import{C as le,S as de,P as ce,_ as ue}from"./adjustments-0001b8e1.js";import{_ as me,a as _e}from"./trash-bad6200c.js";import{_ as pe}from"./edit-51d5eb37.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import{T as he}from"./TextArea-235706fd.js";import{L as fe}from"./Label-36958fc8.js";import{M as ge}from"./Modal-459ba793.js";import{_ as be}from"./plus-3-0d8d5401.js";import{_ as ye}from"./no-data-9a9520f2.js";import"./OverLaye-0858a669.js";import"./search-0186349c.js";const ve="/assets/clock-e9ae3bcf.svg";const xe={props:{list:Array,loading:Boolean},methods:{deleteItem(e){this.$emit("delete_item",e)},editItem(e){this.$emit("edit_item",e)},editStatus(e){this.$emit("edit_status",e)},editReminder(e){this.$emit("add_reminder",e)}}},_=e=>(z("data-v-b8d3e3a7"),e=e(),J(),e),Se=_(()=>t("td",{class:"count skeleton-element"},null,-1)),ke=_(()=>t("td",{class:"user_name"},[t("div",{class:"flex items-center gap-2.5"},[t("div",{class:"user-img skeleton-element"}),t("p",{class:"text-base_semibold flex-1 color-Grey_90 skeleton-element"})])],-1)),we=_(()=>t("td",{class:"user_email skeleton-element"},null,-1)),Te=_(()=>t("td",{class:"user_number skeleton-element"},null,-1)),$e=_(()=>t("td",{class:"user_address skeleton-element"},null,-1)),Ce=_(()=>t("td",{class:"blank"},null,-1)),Ie=_(()=>t("td",{class:"user-status skeleton-element"},null,-1)),De=_(()=>t("td",{class:"dropdown skeleton-element"},null,-1)),je=[Se,ke,we,Te,$e,Ce,Ie,De],Me={key:0},Pe={class:"count"},Ee={class:"gap-8px text-sm_regular color-Grey_90"},Oe={class:"user_name"},Le={class:"display-flex align-center gap-14px"},Ne=["src"],Ge={key:1,src:"https://ps.w.org/user-avatar-reloaded/assets/icon-256x256.png?rev=2540745",class:"user-img"},Ae={class:"text-sm_regular color-Grey_90 line-clamp-1"},Fe={class:"user_email"},Re={class:"text-sm_regular color-Grey_90"},Be={class:"user_number"},Ue={class:"text-sm_regular color-Grey_90"},Ve={class:"user_address"},We={class:"text-sm_regular color-Grey_90 line-clamp-1"},He=_(()=>t("td",{class:"blank"},null,-1)),qe={class:"user-status"},Xe={class:"text-sm_regular color-Grey_90 line-clamp-1"},Ye={class:"dropdown"},ze={class:"icon-btn icon-btn_32px custom-dropdown"},Je=_(()=>t("img",{src:me},null,-1)),Ke={class:"custom-dropdown-list leftside icon-dropdown"},Qe=["onClick"],Ze=_(()=>t("div",{class:"dropdown-link"},[t("img",{src:pe}),t("p",{class:"dropdown-link-title"}," Edit Customer ")],-1)),et=[Ze],tt=["onClick"],st=_(()=>t("div",{class:"dropdown-link"},[t("img",{src:ve}),t("p",{class:"dropdown-link-title"}," Add Follow Up ")],-1)),ot=[st],rt=["onClick"],nt=_(()=>t("div",{class:"dropdown-link"},[t("img",{src:_e}),t("p",{class:"dropdown-link-title required"}," Delete Customer ")],-1)),at=[nt];function it(e,s,o,u,r,n){return d(),m(k,null,[(d(),m(k,null,U(6,(a,i)=>(d(),m(k,null,[o.loading?(d(),m("tr",{key:i},je)):f("",!0)],64))),64)),(d(!0),m(k,null,U(o.list,(a,i)=>(d(),m(k,{key:i},[o.loading?f("",!0):(d(),m("tr",Me,[t("td",Pe,[t("p",Ee,x(i+1),1)]),t("td",Oe,[t("div",Le,[a.cus_profile?(d(),m("img",{key:0,src:a.cus_profile,class:"user-img"},null,8,Ne)):f("",!0),a.cus_profile?f("",!0):(d(),m("img",Ge)),t("p",Ae,x(a.cus_first_name)+" "+x(a.cus_last_name),1)])]),t("td",Fe,[t("p",Re,x(a.cus_email),1)]),t("td",Be,[t("p",Ue,x(a.cus_phone_no),1)]),t("td",Ve,[t("p",We,x(a.cus_address),1)]),He,t("td",qe,[t("p",Xe,x(a.follow_up),1)]),t("td",Ye,[t("div",ze,[Je,t("ul",Ke,[t("li",{class:"dropdown-item",onClick:p=>n.editItem(a.cus_id)},et,8,Qe),t("li",{class:"dropdown-item",onClick:p=>n.editReminder(a.cus_id)},ot,8,tt),t("li",{class:"dropdown-item",onClick:p=>n.deleteItem(a.cus_id)},at,8,rt)])])])]))],64))),128))],64)}const lt=K(xe,[["render",it],["__scopeId","data-v-b8d3e3a7"]]);var E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ct(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}var Q=ct,ut=typeof E=="object"&&E&&E.Object===Object&&E,mt=ut,_t=mt,pt=typeof self=="object"&&self&&self.Object===Object&&self,ht=_t||pt||Function("return this")(),Z=ht,ft=Z,gt=function(){return ft.Date.now()},bt=gt,yt=/\s/;function vt(e){for(var s=e.length;s--&&yt.test(e.charAt(s)););return s}var xt=vt,St=xt,kt=/^\s+/;function wt(e){return e&&e.slice(0,St(e)+1).replace(kt,"")}var Tt=wt,$t=Z,Ct=$t.Symbol,ee=Ct,V=ee,te=Object.prototype,It=te.hasOwnProperty,Dt=te.toString,D=V?V.toStringTag:void 0;function jt(e){var s=It.call(e,D),o=e[D];try{e[D]=void 0;var u=!0}catch{}var r=Dt.call(e);return u&&(s?e[D]=o:delete e[D]),r}var Mt=jt,Pt=Object.prototype,Et=Pt.toString;function Ot(e){return Et.call(e)}var Lt=Ot,W=ee,Nt=Mt,Gt=Lt,At="[object Null]",Ft="[object Undefined]",H=W?W.toStringTag:void 0;function Rt(e){return e==null?e===void 0?Ft:At:H&&H in Object(e)?Nt(e):Gt(e)}var Bt=Rt;function Ut(e){return e!=null&&typeof e=="object"}var Vt=Ut,Wt=Bt,Ht=Vt,qt="[object Symbol]";function Xt(e){return typeof e=="symbol"||Ht(e)&&Wt(e)==qt}var Yt=Xt,zt=Tt,q=Q,Jt=Yt,X=0/0,Kt=/^[-+]0x[0-9a-f]+$/i,Qt=/^0b[01]+$/i,Zt=/^0o[0-7]+$/i,es=parseInt;function ts(e){if(typeof e=="number")return e;if(Jt(e))return X;if(q(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=q(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=zt(e);var o=Qt.test(e);return o||Zt.test(e)?es(e.slice(2),o?2:8):Kt.test(e)?X:+e}var ss=ts,os=Q,F=bt,Y=ss,rs="Expected a function",ns=Math.max,as=Math.min;function is(e,s,o){var u,r,n,a,i,p,y=0,T=!1,v=!1,$=!0;if(typeof e!="function")throw new TypeError(rs);s=Y(s)||0,os(o)&&(T=!!o.leading,v="maxWait"in o,n=v?ns(Y(o.maxWait)||0,s):n,$="trailing"in o?!!o.trailing:$);function C(l){var b=u,I=r;return u=r=void 0,y=l,a=e.apply(I,b),a}function L(l){return y=l,i=setTimeout(c,s),T?C(l):a}function N(l){var b=l-p,I=l-y,B=s-b;return v?as(B,n-I):B}function j(l){var b=l-p,I=l-y;return p===void 0||b>=s||b<0||v&&I>=n}function c(){var l=F();if(j(l))return R(l);i=setTimeout(c,N(l))}function R(l){return i=void 0,$&&u?C(l):(u=r=void 0,a)}function se(){i!==void 0&&clearTimeout(i),y=0,u=p=r=i=void 0}function oe(){return i===void 0?a:R(F())}function G(){var l=F(),b=j(l);if(u=arguments,r=this,p=l,b){if(i===void 0)return L(p);if(v)return clearTimeout(i),i=setTimeout(c,s),C(p)}return i===void 0&&(i=setTimeout(c,s)),a}return G.cancel=se,G.flush=oe,G}var ls=is;const ds=dt(ls);const O="https://devapi.billionbuild.com",cs={components:{Layout:ae,ContentSection:le,SearchBox:de,Pagination:ce,Customers:lt,DeleteModel:ie,Modal:ge,TextArea:he,Label:fe},data(){return{list:[],searchText:"",currentPage:1,totalPages:1,sort:"asc",deleteItemModal:!1,itemId:"",remDate:"",remNote:"",reminderModal:!1,listLoading:!1,listEmpty:!1}},created(){this.customerData();const e=re(),s="Customer List |  Billion Build",o="this is description for Customer List";e.chnageTitle(s,o)},computed:{remBtnDisabled(){const e=/[!@#$%^&*()?":{}|<>]/;return!this.remDate||!this.remNote.trim()||e.test(this.remNote)},formattedDate(){const e=new Date(this.remDate),s=e.getFullYear(),o=`0${e.getMonth()+1}`.slice(-2),u=`0${e.getDate()}`.slice(-2),r=`0${e.getHours()}`.slice(-2),n=`0${e.getMinutes()}`.slice(-2),a=`0${e.getSeconds()}`.slice(-2);return`${s}-${o}-${u} ${r}:${n}:${a}`}},methods:{addUserFun(){this.$router.push({name:"AddCustomer"})},searchTextFun:ds(function(e){this.searchText=e.target.value.trim(),this.customerData()},400),clearSearch(){this.searchText="",this.customerData()},updatePage(e){this.currentPage=e,this.customerData()},changesort(){this.sort=this.sort==="desc"?"asc":"desc",this.customerData()},async customerData(){this.listLoading=!0,this.listEmpty=!1;var e=new FormData;e.append("cus_id",""),e.append("sort",this.sort),e.append("search",this.searchText),e.append("page_no",this.currentPage);try{const s=await M.post(`${O}/customer-list`,e);console.log("response.data-->",s.data),s.data&&s.data.length!==0?(this.listLoading=!1,this.list=s.data,this.totalPages=s.total_pages):(this.listEmpty=!0,this.totalPages=1)}catch(s){P().error(s)}},async statusUpdate(e){var s=new FormData;s.append("cus_id",e);try{(await M.post(`${O}/customer-status`,s)).success===1&&this.customerData()}catch(o){P().error(o)}},getItemId(e){this.deleteItemModal=!0,this.itemId=e},editItem(e){this.$router.push({name:"EditCustomer",params:{id:e}})},async deleteItem(){var e=new FormData;e.append("cus_id",this.itemId);try{(await M.post(`${O}/remove-customer`,e)).success===1&&(this.customerData(),this.deleteItemModal=!1)}catch(s){P().error(s)}},addReminderId(e){this.itemId=e,this.reminderModal=!0},async addReminder(){var e=new FormData;e.append("rem_id",""),e.append("rem_self",""),e.append("cus_id",this.itemId),e.append("rem_notes",this.remNote);const s=this.formattedDate;e.append("rem_date",s);try{(await M.post(`${O}/add-reminder`,e)).success===1&&(this.customerData(),this.reminderModal=!1,this.itemId="")}catch(o){P().error(o)}}}},w=e=>(z("data-v-3236c635"),e=e(),J(),e),us=w(()=>t("div",{class:"w-100 margin-bottom_12px"},[t("h2",{class:"title"},"Customer List")],-1)),ms={class:"table-options"},_s=w(()=>t("img",{src:ue},null,-1)),ps={key:0},hs={key:1},fs={class:"table-options"},gs=w(()=>t("img",{src:be},null,-1)),bs={key:0,class:"data-not-found border-b border-Grey_20 border-solid"},ys=w(()=>t("img",{src:ye},null,-1)),vs=[ys],xs={key:1,class:"w-100 user-table"},Ss=w(()=>t("tr",null,[t("td",{class:"count"},[t("p",{class:"text-base_semibold color-Grey_50"},"No.")]),t("td",{class:"user_name"},[t("p",{class:"text-base_semibold color-Grey_50"},"Customer Name")]),t("td",{class:"user_email"},[t("p",{class:"text-base_semibold color-Grey_50"},"Customer Email")]),t("td",{class:"user_number"},[t("p",{class:"text-base_semibold color-Grey_50"},"Mobile No.")]),t("td",{class:"user_number"},[t("p",{class:"text-base_semibold color-Grey_50"},"Customer Address")]),t("td",{class:"blank"}),t("td",{class:"user-status"},[t("p",{class:"text-base_semibold color-Grey_50"},"Follow Ups Counts")]),t("td",{class:"dropdown"},[t("div",{class:"icon-btn icon-btn_32px custom-dropdown"})])],-1)),ks=w(()=>t("h4",null,"Add Follow Up",-1)),ws={class:"padding-y_12px padding-x_16px"},Ts={class:"space-y-4"},$s={class:"space-y-8px col-span-1"},Cs={class:"space-y-8px col-span-2"},Is=["disabled"];function Ds(e,s,o,u,r,n){const a=h("SearchBox"),i=h("Customers"),p=h("Pagination"),y=h("ContentSection"),T=h("Label"),v=h("VDatePicker"),$=h("ErrorMessage"),C=h("TextArea"),L=h("Modal"),N=h("Layout"),j=h("DeleteModel");return d(),m(k,null,[g(N,null,{default:S(()=>[g(y,null,{"table-header":S(()=>[us,t("div",ms,[t("button",{class:"btn-regular display-flex align-center gap-8px",onClick:s[0]||(s[0]=c=>n.changesort())},[_s,r.sort==="asc"?(d(),m("span",ps,"Newest")):f("",!0),r.sort==="desc"?(d(),m("span",hs,"Oldest")):f("",!0)])]),t("div",fs,[g(a,{placeholder:"Search Customer",value:r.searchText,onInput:n.searchTextFun,onClear_search:n.clearSearch},null,8,["value","onInput","onClear_search"]),t("button",{class:"btn-regular display-flex align-center w-100 gap-8px text-no-wrap",onClick:s[1]||(s[1]=c=>n.addUserFun())},[gs,ne(" Add New Customer")])])]),"main-table":S(()=>[r.listEmpty?(d(),m("div",bs,vs)):f("",!0),r.listEmpty?f("",!0):(d(),m("table",xs,[t("tbody",null,[Ss,g(i,{list:r.list,onDelete_item:n.getItemId,onEdit_item:n.editItem,onEdit_status:n.statusUpdate,onAdd_reminder:n.addReminderId,loading:r.listLoading},null,8,["list","onDelete_item","onEdit_item","onEdit_status","onAdd_reminder","loading"])])]))]),"table-footer":S(()=>[g(p,{currentPage:r.currentPage,totalPages:r.totalPages,onUpdatePage:n.updatePage},null,8,["currentPage","totalPages","onUpdatePage"])]),_:1}),r.reminderModal?(d(),A(L,{key:0,onCloseModal:s[6]||(s[6]=c=>this.reminderModal=!this.reminderModal)},{header:S(()=>[ks]),footer:S(()=>[t("button",{class:"btn-regular",onClick:s[4]||(s[4]=c=>this.reminderModal=!this.reminderModal)},"Cancel"),t("button",{class:"btn-regular bg-purple color-white",disabled:n.remBtnDisabled,onClick:s[5]||(s[5]=(...c)=>n.addReminder&&n.addReminder(...c))},"Add Follow Up",8,Is)]),default:S(()=>[t("div",ws,[t("div",Ts,[t("div",$s,[g(T,{label:"Select Date"}),g(v,{modelValue:r.remDate,"onUpdate:modelValue":s[2]||(s[2]=c=>r.remDate=c),color:"sky-blue",attributes:e.attributes,mode:"dateTime",onChange:e.highlightSelectedDate,expanded:""},null,8,["modelValue","attributes","onChange"]),!r.remDate&&e.formSubmitted?(d(),A($,{key:0,msg:""})):f("",!0)]),t("div",Cs,[g(T,{label:"Note (optional)"}),g(C,{placeholder:"Enter Reminder Note",id:"Note (optional)",value:r.remNote,onInput:s[3]||(s[3]=c=>r.remNote=c.target.value)},null,8,["value"])])])])]),_:1})):f("",!0)]),_:1}),r.deleteItemModal?(d(),A(j,{key:0,model_title:"Delete Customer",model_subtitle:"Are you sure you want to delete this Customer?",onClose_model:s[7]||(s[7]=c=>r.deleteItemModal=!1),onDelete_item:s[8]||(s[8]=c=>n.deleteItem())})):f("",!0)],64)}const Vs=K(cs,[["render",Ds],["__scopeId","data-v-3236c635"]]);export{Vs as default};
