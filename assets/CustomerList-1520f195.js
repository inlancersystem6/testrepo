import{_ as S,o as n,c as d,F as b,j as I,i as m,a as e,t as p,p as $,k as M,u as G,f as k,g as x,r as _,b as u,w as h,h as w,d as B}from"./index-5d175349.js";import{L as U,D as R}from"./Layout-feaff5d7.js";import{C as V,S as j,P as q,_ as H}from"./adjustments-5072e001.js";import{_ as O,a as W}from"./trash-bad6200c.js";import{_ as Y}from"./edit-51d5eb37.js";import{T as z}from"./TextArea-d58f5809.js";import{L as J}from"./Label-d788184e.js";import{M as K}from"./Modal-21c40316.js";import{_ as Q}from"./debounce-dc4ebcc5.js";import{_ as X}from"./plus-3-0d8d5401.js";import{_ as Z}from"./no-data-9a9520f2.js";import"./OverLaye-142172c4.js";import"./search-0186349c.js";const ee="/assets/clock-e9ae3bcf.svg";const te={props:{list:Array,loading:Boolean},methods:{deleteItem(t){this.$emit("delete_item",t)},editItem(t){this.$emit("edit_item",t)},editStatus(t){this.$emit("edit_status",t)},editReminder(t){this.$emit("add_reminder",t)}}},i=t=>($("data-v-4f4a73eb"),t=t(),M(),t),se=i(()=>e("td",{class:"count skeleton-element"},null,-1)),oe=i(()=>e("td",{class:"user_name"},[e("div",{class:"flex items-center gap-2.5"},[e("div",{class:"user-img skeleton-element"}),e("p",{class:"text-base_semibold flex-1 color-Grey_90 skeleton-element"})])],-1)),ae=i(()=>e("td",{class:"user_email skeleton-element"},null,-1)),re=i(()=>e("td",{class:"user_number skeleton-element"},null,-1)),le=i(()=>e("td",{class:"user_address skeleton-element"},null,-1)),ne=i(()=>e("td",{class:"blank"},null,-1)),de=i(()=>e("td",{class:"user-status skeleton-element"},null,-1)),ie=i(()=>e("td",{class:"dropdown skeleton-element"},null,-1)),ce=[se,oe,ae,re,le,ne,de,ie],_e={key:0},me={class:"count"},ue={class:"gap-8px text-sm_regular color-Grey_90"},pe={class:"user_name"},he={class:"display-flex align-center gap-14px"},ge=["src"],be={key:1,src:"https://ps.w.org/user-avatar-reloaded/assets/icon-256x256.png?rev=2540745",class:"user-img"},fe={class:"text-sm_regular color-Grey_90 line-clamp-1"},ye={class:"user_email"},xe={class:"text-sm_regular color-Grey_90"},ve={class:"user_number"},ke={class:"text-sm_regular color-Grey_90"},Ce={class:"user_address"},we={class:"text-sm_regular color-Grey_90 line-clamp-1"},De=i(()=>e("td",{class:"blank"},null,-1)),Ie={class:"user-status"},Se={class:"text-sm_regular color-Grey_90 line-clamp-1"},$e={class:"dropdown"},Me={class:"icon-btn icon-btn_32px custom-dropdown"},Pe=i(()=>e("img",{src:O},null,-1)),Le={class:"custom-dropdown-list leftside icon-dropdown"},Ne=["onClick"],Ee=i(()=>e("div",{class:"dropdown-link"},[e("img",{src:Y}),e("p",{class:"dropdown-link-title"}," Edit Customer ")],-1)),Te=[Ee],Ae=["onClick"],Fe=i(()=>e("div",{class:"dropdown-link"},[e("img",{src:ee}),e("p",{class:"dropdown-link-title"}," Add Follow Up ")],-1)),Ge=[Fe],Be=["onClick"],Ue=i(()=>e("div",{class:"dropdown-link"},[e("img",{src:W}),e("p",{class:"dropdown-link-title required"}," Delete Customer ")],-1)),Re=[Ue];function Ve(t,s,r,y,o,a){return n(),d(b,null,[(n(),d(b,null,I(6,(l,g)=>(n(),d(b,null,[r.loading?(n(),d("tr",{key:g},ce)):m("",!0)],64))),64)),(n(!0),d(b,null,I(r.list,(l,g)=>(n(),d(b,{key:g},[r.loading?m("",!0):(n(),d("tr",_e,[e("td",me,[e("p",ue,p(g+1),1)]),e("td",pe,[e("div",he,[l.cus_profile?(n(),d("img",{key:0,src:l.cus_profile,class:"user-img"},null,8,ge)):m("",!0),l.cus_profile?m("",!0):(n(),d("img",be)),e("p",fe,p(l.cus_first_name)+" "+p(l.cus_last_name),1)])]),e("td",ye,[e("p",xe,p(l.cus_email),1)]),e("td",ve,[e("p",ke,p(l.cus_phone_no),1)]),e("td",Ce,[e("p",we,p(l.cus_address),1)]),De,e("td",Ie,[e("p",Se,p(l.follow_up),1)]),e("td",$e,[e("div",Me,[Pe,e("ul",Le,[e("li",{class:"dropdown-item",onClick:v=>a.editItem(l.cus_id)},Te,8,Ne),e("li",{class:"dropdown-item",onClick:v=>a.editReminder(l.cus_id)},Ge,8,Ae),e("li",{class:"dropdown-item",onClick:v=>a.deleteItem(l.cus_id)},Re,8,Be)])])])]))],64))),128))],64)}const je=S(te,[["render",Ve],["__scopeId","data-v-4f4a73eb"]]);const C="https://devapi.billionbuild.com",qe={components:{Layout:U,ContentSection:V,SearchBox:j,Pagination:q,Customers:je,DeleteModel:R,Modal:K,TextArea:z,Label:J},data(){return{breadcrumbList:[{name:"Dashboard",link:"/"},{name:"Customers"}],list:[],searchText:"",currentPage:1,totalPages:1,sort:"asc",deleteItemModal:!1,itemId:"",remDate:"",remNote:"",reminderModal:!1,listLoading:!1,listEmpty:!1}},created(){this.customerData();const t=G(),s="Customer List |  Billion Build",r="this is description for Customer List";t.chnageTitle(s,r)},computed:{remBtnDisabled(){const t=/[!@#$%^&*()?":{}|<>]/;return!this.remDate||!this.remNote.trim()||t.test(this.remNote)},formattedDate(){const t=new Date(this.remDate),s=t.getFullYear(),r=`0${t.getMonth()+1}`.slice(-2),y=`0${t.getDate()}`.slice(-2),o=`0${t.getHours()}`.slice(-2),a=`0${t.getMinutes()}`.slice(-2),l=`0${t.getSeconds()}`.slice(-2);return`${s}-${r}-${y} ${o}:${a}:${l}`}},methods:{addUserFun(){this.$router.push({name:"AddCustomer"})},searchTextFun:Q(function(t){this.searchText=t.target.value.trim(),this.customerData()},400),clearSearch(){this.searchText="",this.customerData()},updatePage(t){this.currentPage=t,this.customerData()},changesort(){this.sort=this.sort==="desc"?"asc":"desc",this.customerData()},async customerData(){this.listLoading=!0,this.listEmpty=!1;var t=new FormData;t.append("cus_id",""),t.append("sort",this.sort),t.append("search",this.searchText),t.append("page_no",this.currentPage);try{const s=await k.post(`${C}/customer-list`,t);s.data&&s.data.length!==0?(this.listLoading=!1,this.list=s.data,this.totalPages=s.total_pages):(x().error(s.message),this.listEmpty=!0,this.totalPages=1)}catch(s){x().error(s)}},async statusUpdate(t){var s=new FormData;s.append("cus_id",t);try{(await k.post(`${C}/customer-status`,s)).success===1&&this.customerData()}catch(r){x().error(r)}},getItemId(t){this.deleteItemModal=!0,this.itemId=t},editItem(t){this.$router.push({name:"EditCustomer",params:{id:t}})},async deleteItem(){var t=new FormData;t.append("cus_id",this.itemId);try{(await k.post(`${C}/remove-customer`,t)).success===1&&(this.customerData(),this.deleteItemModal=!1)}catch(s){x().error(s)}},addReminderId(t){this.itemId=t,this.reminderModal=!0},async addReminder(){var t=new FormData;t.append("rem_id",""),t.append("rem_self",""),t.append("cus_id",this.itemId),t.append("rem_notes",this.remNote);const s=this.formattedDate;t.append("rem_date",s);try{(await k.post(`${C}/add-reminder`,t)).success===1&&(this.customerData(),this.reminderModal=!1,this.itemId="")}catch(r){x().error(r)}}}},f=t=>($("data-v-f76b5301"),t=t(),M(),t),He=f(()=>e("div",{class:"w-100 margin-bottom_12px"},[e("h2",{class:"title"},"Customer List")],-1)),Oe={class:"table-options"},We=f(()=>e("img",{src:H},null,-1)),Ye={key:0},ze={key:1},Je={class:"table-options"},Ke=f(()=>e("img",{src:X},null,-1)),Qe={key:0,class:"data-not-found border-b border-Grey_20 border-solid"},Xe=f(()=>e("img",{src:Z},null,-1)),Ze=[Xe],et={key:1,class:"w-100 user-table"},tt=f(()=>e("tr",null,[e("td",{class:"count"},[e("p",{class:"text-base_semibold color-Grey_50"},"No.")]),e("td",{class:"user_name"},[e("p",{class:"text-base_semibold color-Grey_50"},"Customer Name")]),e("td",{class:"user_email"},[e("p",{class:"text-base_semibold color-Grey_50"},"Customer Email")]),e("td",{class:"user_number"},[e("p",{class:"text-base_semibold color-Grey_50"},"Mobile No.")]),e("td",{class:"user_address"},[e("p",{class:"text-base_semibold color-Grey_50"},"Customer Address")]),e("td",{class:"blank"}),e("td",{class:"user-status"},[e("p",{class:"text-base_semibold color-Grey_50"},"Follow Ups Counts")]),e("td",{class:"dropdown"},[e("div",{class:"icon-btn icon-btn_32px custom-dropdown"})])],-1)),st=f(()=>e("h4",null,"Add Follow Up",-1)),ot={class:"padding-y_12px padding-x_16px"},at={class:"space-y-4"},rt={class:"space-y-8px col-span-1"},lt={class:"space-y-8px col-span-2"},nt=["disabled"];function dt(t,s,r,y,o,a){const l=_("SearchBox"),g=_("Customers"),v=_("Pagination"),P=_("ContentSection"),D=_("Label"),L=_("VDatePicker"),N=_("ErrorMessage"),E=_("TextArea"),T=_("Modal"),A=_("Layout"),F=_("DeleteModel");return n(),d(b,null,[u(A,{breadcrumb:o.breadcrumbList},{default:h(()=>[u(P,null,{"table-header":h(()=>[He,e("div",Oe,[e("button",{class:"btn-regular display-flex align-center gap-8px",onClick:s[0]||(s[0]=c=>a.changesort())},[We,o.sort==="asc"?(n(),d("span",Ye,"Newest")):m("",!0),o.sort==="desc"?(n(),d("span",ze,"Oldest")):m("",!0)])]),e("div",Je,[u(l,{placeholder:"Search Customer",value:o.searchText,onInput:a.searchTextFun,onClear_search:a.clearSearch},null,8,["value","onInput","onClear_search"]),e("button",{class:"btn-regular display-flex align-center w-100 gap-8px text-no-wrap",onClick:s[1]||(s[1]=c=>a.addUserFun())},[Ke,B(" Add New Customer")])])]),"main-table":h(()=>[o.listEmpty?(n(),d("div",Qe,Ze)):m("",!0),o.listEmpty?m("",!0):(n(),d("table",et,[e("tbody",null,[tt,u(g,{list:o.list,onDelete_item:a.getItemId,onEdit_item:a.editItem,onEdit_status:a.statusUpdate,onAdd_reminder:a.addReminderId,loading:o.listLoading},null,8,["list","onDelete_item","onEdit_item","onEdit_status","onAdd_reminder","loading"])])]))]),"table-footer":h(()=>[u(v,{currentPage:o.currentPage,totalPages:o.totalPages,onUpdatePage:a.updatePage},null,8,["currentPage","totalPages","onUpdatePage"])]),_:1}),o.reminderModal?(n(),w(T,{key:0,onCloseModal:s[6]||(s[6]=c=>this.reminderModal=!this.reminderModal)},{header:h(()=>[st]),footer:h(()=>[e("button",{class:"btn-regular",onClick:s[4]||(s[4]=c=>this.reminderModal=!this.reminderModal)},"Cancel"),e("button",{class:"btn-regular",disabled:a.remBtnDisabled,onClick:s[5]||(s[5]=(...c)=>a.addReminder&&a.addReminder(...c))},"Save",8,nt)]),default:h(()=>[e("div",ot,[e("div",at,[e("div",rt,[u(D,{label:"Select Date"}),u(L,{modelValue:o.remDate,"onUpdate:modelValue":s[2]||(s[2]=c=>o.remDate=c),color:"sky-blue",attributes:t.attributes,mode:"dateTime",onChange:t.highlightSelectedDate,expanded:""},null,8,["modelValue","attributes","onChange"]),!o.remDate&&t.formSubmitted?(n(),w(N,{key:0,msg:""})):m("",!0)]),e("div",lt,[u(D,{label:"Note (optional)"}),u(E,{placeholder:"Enter Reminder Note",id:"Note (optional)",value:o.remNote,onInput:s[3]||(s[3]=c=>o.remNote=c.target.value)},null,8,["value"])])])])]),_:1})):m("",!0)]),_:1},8,["breadcrumb"]),o.deleteItemModal?(n(),w(F,{key:0,model_title:"Delete Customer",model_subtitle:"Are you sure you want to delete this Customer?",onClose_model:s[7]||(s[7]=c=>o.deleteItemModal=!1),onDelete_item:s[8]||(s[8]=c=>a.deleteItem())})):m("",!0)],64)}const kt=S(qe,[["render",dt],["__scopeId","data-v-f76b5301"]]);export{kt as default};
