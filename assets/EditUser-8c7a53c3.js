import{L as I}from"./Layout-feaff5d7.js";import{_ as y,f as k,r as m,o as i,h,w as M,a as e,b as d,i as n,n as C,c as p,p as R,k as D,l as g,v as x,e as S,j as L,F,t as f,d as T,m as N}from"./index-5d175349.js";import{C as O}from"./ContentSection2-cea15362.js";import{L as B}from"./Label-d788184e.js";import{I as $}from"./Input-d28165ea.js";import{S as G}from"./Select-3d8b1386.js";import{E as j}from"./ErrorMessage-d5a29056.js";import{_ as Z}from"./plus-3-0d8d5401.js";import"./OverLaye-142172c4.js";import"./search-0186349c.js";const U="https://devapi.billionbuild.com",z={components:{Layout:I,ContentSection:O,Label:B,Input:$,ErrorMessage:j,Select:G},data(){return{userFirstName:"",userLastName:"",userEmail:"",userNumber:"",userPass:"",userCoPass:"",profilePic:"",selectedImg:"",userId:"",formSubmitted:!1,isvalidEmail:!0,typePassword:!0,typePassword2:!0,passwordNotMatch:!1,roleList:[],selectedRole:"",selectedRoleId:""}},created(){this.userId=this.$route.params.id,this.UserData(),this.featchRoleList()},computed:{btnDisabled(){return!this.userFirstName.trim()||!this.userLastName.trim()||!this.userEmail.trim()||!this.userNumber.trim()||this.userNumber.trim().length!==10||!this.isvalidEmail}},methods:{validateEmail(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.userEmail)},selectedPic(o){const s=o.target.files[0];(s.type==="image/png"||s.type==="image/jpeg"||s.type==="image/gif"||s.type==="image/svg"||s.type==="image/jpg")&&(this.profilePic=s,this.selectedImg=URL.createObjectURL(s))},async featchRoleList(){var o=new FormData;o.append("role_id","");try{const s=await k.post(`${U}/role-list`,o);this.roleList=s.data}catch(s){console.log(s)}},async UserData(){var o=new FormData;o.append("user_id",this.userId);try{const s=await k.post(`${U}/edit-user`,o);this.userFirstName=s.data.data.user_first_name,this.userLastName=s.data.data.user_last_name,this.userNumber=s.data.data.user_mobile_number,this.userEmail=s.data.data.user_email,this.profilePic=s.data.data.user_profile_pic,this.selectedRole=s.data.data.user_role}catch(s){console.log(s)}},onOptionSelected(o){this.selectedRole=o.role_name,this.selectedRoleId=o.role_id},async EditUser(){var o=new FormData;o.append("user_id",this.userId),o.append("user_first_name",this.userFirstName),o.append("user_last_name",this.userLastName),o.append("user_email",this.userEmail),o.append("user_phone_number",this.userNumber),o.append("user_profile_pic",this.profilePic),o.append("user_role",this.selectedRoleId);try{(await k.post(`${U}/add-user`,o)).success===1&&this.$router.push({name:"UserList"})}catch(s){console.log(s)}}}},V=o=>(R("data-v-594edc18"),o=o(),D(),o),A={class:"row"},W={class:"col-8"},q={class:"address-form"},H={class:"space-y-8px"},J={class:"space-y-8px"},K={class:"space-y-8px"},Q={class:"space-y-8px"},X={class:"space-y-8px"},Y=V(()=>e("div",null,null,-1)),ss=["disabled"],es={class:"col-2"},ts={class:"user_pic"},os=["src"],rs=["src"],is={class:"add_pic",for:"user-pic"},as=V(()=>e("img",{src:Z},null,-1));function ns(o,s,_,P,t,a){const u=m("Label"),l=m("Input"),r=m("ErrorMessage"),w=m("Select"),v=m("ContentSection");return i(),h(v,{title:"Edit User"},{default:M(()=>[e("div",A,[e("div",W,[e("div",q,[e("div",H,[d(u,{label:"User First Name"}),d(l,{placeholder:"Enter User First Name",id:"User First Name",value:t.userFirstName,onInput:s[0]||(s[0]=c=>t.userFirstName=c.target.value)},null,8,["value"]),!t.userFirstName&&t.formSubmitted?(i(),h(r,{key:0,msg:""})):n("",!0)]),e("div",J,[d(u,{label:"User Last Name"}),d(l,{placeholder:"Enter User Last Name",id:"User Last Name",value:t.userLastName,onInput:s[1]||(s[1]=c=>t.userLastName=c.target.value)},null,8,["value"]),!t.userLastName&&t.formSubmitted?(i(),h(r,{key:0,msg:""})):n("",!0)]),e("div",K,[d(u,{label:"User Email"}),d(l,{placeholder:"Enter User Email",id:"User Email",value:t.userEmail,onInput:s[2]||(s[2]=c=>{t.userEmail=c.target.value,t.isvalidEmail=a.validateEmail()}),class:C({input_error:!t.isvalidEmail})},null,8,["value","class"]),t.isvalidEmail?n("",!0):(i(),h(r,{key:0,msg:"Invalid email"})),!t.userEmail&&t.formSubmitted?(i(),h(r,{key:1,msg:""})):n("",!0)]),e("div",Q,[d(u,{label:"User Phone No."}),d(l,{placeholder:"Enter User Number",id:"User Phone No.",value:t.userNumber,onInput:s[3]||(s[3]=c=>t.userNumber=c.target.value),type:"number",class:C({input_error:t.userNumber.length>10})},null,8,["value","class"]),!t.userNumber&&t.formSubmitted?(i(),h(r,{key:0,msg:""})):n("",!0),t.userNumber.length>10?(i(),h(r,{key:1,msg:"Only 10 number valid"})):n("",!0)]),e("div",X,[d(u,{label:"Select  Role"}),d(w,{options:t.roleList,responseData:t.selectedRole,onOptionSelected:a.onOptionSelected},null,8,["options","responseData","onOptionSelected"])]),Y,e("button",{type:"submit",class:"btn-regular margin-top_8px",disabled:a.btnDisabled,onClick:s[4]||(s[4]=c=>a.EditUser())},"Edit User",8,ss)])]),e("div",es,[e("div",ts,[this.selectedImg?(i(),p("img",{key:0,src:this.selectedImg,class:"pic"},null,8,os)):n("",!0),this.selectedImg?n("",!0):(i(),p("img",{key:1,src:this.profilePic,class:"pic"},null,8,rs)),e("label",is,[e("input",{type:"file",id:"user-pic",onChange:s[5]||(s[5]=(...c)=>a.selectedPic&&a.selectedPic(...c))},null,32),as])])])])]),_:1})}const ds=y(z,[["render",ns],["__scopeId","data-v-594edc18"]]);const ls="https://devapi.billionbuild.com",cs={components:{ErrorMessage:j},data(){return{typePassword:!0,typePassword2:!0,typePassword3:!0,passwordNotMatch:!1,profilePass:"",profileCoPass:"",passwordError:"",passwordErrorShow:!1,userId:""}},created(){this.userId=this.$route.params.id},computed:{passwordBtnDis(){return this.passwordNotMatch}},methods:{checkPasswords(){this.profilePass&&this.profileCoPass&&this.profilePass===this.profileCoPass?this.passwordNotMatch=!1:this.passwordNotMatch=!0},async passwordUpdate(){var o=new FormData;o.append("user_id",this.userId),o.append("old_password",this.profileOldPass),o.append("new_password",this.profilePass),o.append("confirm_password",this.profileCoPass);try{const s=await k.post(`${ls}/user-change-password`,o);s.success===1&&this.$router.push({name:"UserList"}),s.success===0&&(this.passwordErrorShow=!0,this.passwordError=s.message)}catch(s){console.log(s)}}}},b=o=>(R("data-v-82790c67"),o=o(),D(),o),ps={class:"profile-card p-0"},us=b(()=>e("div",{class:"heading padding-18px"},[e("h2",{class:"text-capitalize text-xl_semibold"},"Chnage Password")],-1)),hs={class:"padding-18px space-y-32px"},ms={class:"space-y-16px"},_s={class:"space-y-8px"},ws={class:"search-wrraper w-100 border-Grey_20"},vs=["type"],ks={class:"icon togglePassword"},gs=b(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M12 4.25C4.5 4.25 1.5 12 1.5 12C1.5 12 4.5 19.75 12 19.75C19.5 19.75 22.5 12 22.5 12C22.5 12 19.5 4.25 12 4.25Z",stroke:"#191C1F","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"#191C1F","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),Cs=[gs],fs=S('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-82790c67><path d="M4.5 3.75L19.5 20.25" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M14.522 14.7766C13.8338 15.407 12.9334 15.7551 12.0001 15.7516C11.2432 15.7515 10.5041 15.5224 9.87984 15.0944C9.25561 14.6663 8.77551 14.0594 8.50265 13.3535C8.22979 12.6475 8.17695 11.8754 8.35107 11.1389C8.52519 10.4023 8.91812 9.73564 9.47821 9.22656" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M6.9375 6.42969C3.1125 8.36094 1.5 11.9984 1.5 11.9984C1.5 11.9984 4.5 18.7484 12 18.7484C13.7574 18.7628 15.4929 18.3578 17.0625 17.5672" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M19.5564 15.8531C21.6002 14.025 22.5002 12 22.5002 12C22.5002 12 19.5002 5.25002 12.0002 5.25002C11.35 5.24874 10.7008 5.30205 10.0596 5.4094" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M12.7031 8.31641C13.5006 8.46751 14.2273 8.8739 14.7735 9.47426C15.3198 10.0746 15.6559 10.8364 15.7313 11.6445" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path></svg>',1),ys=[fs],bs={class:"space-y-8px"},Ps=["type"],xs={class:"icon togglePassword"},Ns=b(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M12 4.25C4.5 4.25 1.5 12 1.5 12C1.5 12 4.5 19.75 12 19.75C19.5 19.75 22.5 12 22.5 12C22.5 12 19.5 4.25 12 4.25Z",stroke:"#191C1F","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"#191C1F","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),Us=[Ns],Es=S('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-82790c67><path d="M4.5 3.75L19.5 20.25" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M14.522 14.7766C13.8338 15.407 12.9334 15.7551 12.0001 15.7516C11.2432 15.7515 10.5041 15.5224 9.87984 15.0944C9.25561 14.6663 8.77551 14.0594 8.50265 13.3535C8.22979 12.6475 8.17695 11.8754 8.35107 11.1389C8.52519 10.4023 8.91812 9.73564 9.47821 9.22656" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M6.9375 6.42969C3.1125 8.36094 1.5 11.9984 1.5 11.9984C1.5 11.9984 4.5 18.7484 12 18.7484C13.7574 18.7628 15.4929 18.3578 17.0625 17.5672" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M19.5564 15.8531C21.6002 14.025 22.5002 12 22.5002 12C22.5002 12 19.5002 5.25002 12.0002 5.25002C11.35 5.24874 10.7008 5.30205 10.0596 5.4094" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M12.7031 8.31641C13.5006 8.46751 14.2273 8.8739 14.7735 9.47426C15.3198 10.0746 15.6559 10.8364 15.7313 11.6445" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path></svg>',1),Ls=[Es],Fs={class:"space-y-8px"},Is=["type"],Ms={class:"icon togglePassword"},Ss=b(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M12 4.25C4.5 4.25 1.5 12 1.5 12C1.5 12 4.5 19.75 12 19.75C19.5 19.75 22.5 12 22.5 12C22.5 12 19.5 4.25 12 4.25Z",stroke:"#191C1F","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"#191C1F","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),js=[Ss],Rs=S('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-82790c67><path d="M4.5 3.75L19.5 20.25" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M14.522 14.7766C13.8338 15.407 12.9334 15.7551 12.0001 15.7516C11.2432 15.7515 10.5041 15.5224 9.87984 15.0944C9.25561 14.6663 8.77551 14.0594 8.50265 13.3535C8.22979 12.6475 8.17695 11.8754 8.35107 11.1389C8.52519 10.4023 8.91812 9.73564 9.47821 9.22656" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M6.9375 6.42969C3.1125 8.36094 1.5 11.9984 1.5 11.9984C1.5 11.9984 4.5 18.7484 12 18.7484C13.7574 18.7628 15.4929 18.3578 17.0625 17.5672" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M19.5564 15.8531C21.6002 14.025 22.5002 12 22.5002 12C22.5002 12 19.5002 5.25002 12.0002 5.25002C11.35 5.24874 10.7008 5.30205 10.0596 5.4094" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path><path d="M12.7031 8.31641C13.5006 8.46751 14.2273 8.8739 14.7735 9.47426C15.3198 10.0746 15.6559 10.8364 15.7313 11.6445" stroke="#191C1F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-82790c67></path></svg>',1),Ds=[Rs],Os={class:"padding-18px border-t border-solid border-Grey_20"},Bs={class:"w-100 display-flex align-center justify-end gap-12px"},$s=["disabled"];function Vs(o,s,_,P,t,a){const u=m("Label"),l=m("ErrorMessage");return i(),p("div",ps,[us,e("div",hs,[e("div",ms,[e("div",_s,[d(u,{label:"Old Password"}),e("div",ws,[g(e("input",{class:"w-100",type:t.typePassword3?"password":"text",placeholder:"Enter old Password",id:"Old Password",onInput:s[0]||(s[0]=r=>o.profileOldPass=r.target.value),"onUpdate:modelValue":s[1]||(s[1]=r=>o.profileOldPass=r)},null,40,vs),[[x,o.profileOldPass]]),e("div",ks,[t.typePassword3?(i(),p("span",{key:0,onClick:s[2]||(s[2]=r=>t.typePassword3=!1)},Cs)):n("",!0),t.typePassword3?n("",!0):(i(),p("span",{key:1,onClick:s[3]||(s[3]=r=>t.typePassword3=!0)},ys))])]),this.passwordErrorShow?(i(),h(l,{key:0,msg:this.passwordError},null,8,["msg"])):n("",!0)]),e("div",bs,[d(u,{label:"New Password"}),e("div",{class:C(["search-wrraper w-100 border-Grey_20",{input_error:t.passwordNotMatch}])},[g(e("input",{class:"w-100",type:t.typePassword?"password":"text",placeholder:"Enter new Password",id:"New Password",onInput:s[4]||(s[4]=r=>{t.profilePass=r.target.value,a.checkPasswords()}),"onUpdate:modelValue":s[5]||(s[5]=r=>t.profilePass=r)},null,40,Ps),[[x,t.profilePass]]),e("div",xs,[t.typePassword?(i(),p("span",{key:0,onClick:s[6]||(s[6]=r=>t.typePassword=!1)},Us)):n("",!0),t.typePassword?n("",!0):(i(),p("span",{key:1,onClick:s[7]||(s[7]=r=>t.typePassword=!0)},Ls))])],2),this.passwordNotMatch?(i(),h(l,{key:0,msg:"Password is not match"})):n("",!0)]),e("div",Fs,[d(u,{label:"Confirm Password"}),e("div",{class:C(["search-wrraper w-100 border-Grey_20",{input_error:t.passwordNotMatch}])},[g(e("input",{class:"w-100",type:t.typePassword2?"password":"text",placeholder:"Enter confirm Password",id:"Confirm Password",onInput:s[8]||(s[8]=r=>{t.profileCoPass=r.target.value,a.checkPasswords()}),"onUpdate:modelValue":s[9]||(s[9]=r=>t.profileCoPass=r)},null,40,Is),[[x,t.profileCoPass]]),e("div",Ms,[t.typePassword2?(i(),p("span",{key:0,onClick:s[10]||(s[10]=r=>t.typePassword2=!1)},js)):n("",!0),t.typePassword2?n("",!0):(i(),p("span",{key:1,onClick:s[11]||(s[11]=r=>t.typePassword2=!0)},Ds))])],2),this.passwordNotMatch?(i(),h(l,{key:0,msg:"Password is not match"})):n("",!0)])])]),e("div",Os,[e("div",Bs,[e("button",{class:"btn-regular",disabled:a.passwordBtnDis,onClick:s[12]||(s[12]=(...r)=>a.passwordUpdate&&a.passwordUpdate(...r))},"Save",8,$s)])])])}const Ts=y(cs,[["render",Vs],["__scopeId","data-v-82790c67"]]);const E="https://devapi.billionbuild.com",Gs={components:{Layout:I,ContentSection:O,Label:B,Input:$,ErrorMessage:j},data(){return{formSubmitted:!1,permissionsList:[],checked:"",roleData:"",userId:"",role:"",checkedPermissions:[],checkedPer:""}},created(){this.userId=this.$route.params.id,this.role=this.$route.params.name,this.featchPermissionsList(),this.featchRoleList()},methods:{async featchRoleList(){var o=new FormData;o.append("user_id",this.userId);try{const s=await k.post(`${E}/edit-user`,o);this.checkedPer=s.data.user_permission;const _=this.checkedPer.split(",").map(Number);this.checkedPermissions.push(..._)}catch(s){console.log(s)}},async featchPermissionsList(){var o=new FormData;try{const s=await k.post(`${E}/permission-list`,o);this.permissionsList=s.data}catch(s){console.log(s)}},checkPermission(o,s){return o?o.split(",").includes(s.toString()):!1},updateCheckedPermissions(o){const s=this.checkedPermissions.indexOf(o);s!==-1?this.checkedPermissions.splice(s,1):this.checkedPermissions.push(o)},async addRole(){const o=this.checkedPermissions.join(",");var s=new FormData;s.append("id",this.userId),s.append("check",o);try{(await k.post(`${E}/add-permissions`,s)).success===1&&this.$router.push({name:"UserList"})}catch(_){console.log(_)}}}},Zs={class:"col-8"},zs={class:"address-form"},As={class:"space-y-8px col-span-2"},Ws={class:"margin-top_16px display-flex align-center gap-20px Lg_flex-wrap"},qs={class:"text-small_semibold color-Grey_50 text-capitalize w_140px"},Hs={class:"display-flex align-center gap-18px Mobile_flex-wrap"},Js={class:"custom-toogle-btn display-flex align-center gap-8px"},Ks=["onChange","checked","id"],Qs=["for"],Xs=["disabled"];function Ys(o,s,_,P,t,a){const u=m("ContentSection");return i(),h(u,{title:"Edit Permissions"},{default:M(()=>[e("div",Zs,[e("div",zs,[e("div",As,[(i(!0),p(F,null,L(t.permissionsList,(l,r)=>(i(),p("div",{key:r},[e("div",Ws,[e("p",qs,f(l.name)+" permission:-",1),e("div",Hs,[(i(!0),p(F,null,L(l.permissions,(w,v)=>(i(),p("div",{key:v,class:"img-not-selected"},[e("div",Js,[e("input",{type:"checkbox",class:"form-toogle-btn",onChange:c=>a.updateCheckedPermissions(w.permission_id),checked:a.checkPermission(this.checkedPer,w.permission_id),id:r+"_"+v},null,40,Ks),T(" "+f(t.checked)+" ",1),e("label",{class:"text-capitalize text-large_semibold color-Grey_90",for:r+"_"+v},f(w.permission_name),9,Qs)])]))),128))])])]))),128))])]),e("button",{type:"submit",class:"btn-regular margin-top_24px",disabled:o.btnDisabled,onClick:s[0]||(s[0]=(...l)=>a.addRole&&a.addRole(...l))},"Add Permissions ",8,Xs)])]),_:1})}const se=y(Gs,[["render",Ys],["__scopeId","data-v-5c694c6b"]]),ee={components:{Layout:I,UserInfo:ds,UserPassword:Ts,UserPermissions:se},data(){return{userId:"",activeTab:0,tabs:["User Info","Password","Role & Permissions"]}},created(){this.userId=this.$route.params.id}},te={class:"tab-list"},oe=["onClick"];function re(o,s,_,P,t,a){const u=m("UserInfo"),l=m("UserPassword"),r=m("UserPermissions"),w=m("Layout");return i(),h(w,null,{default:M(()=>[e("ul",te,[(i(!0),p(F,null,L(t.tabs,(v,c)=>(i(),p("li",{class:"tab-items",key:c},[e("button",{class:C(["tab-button",{"active-tab-button":t.activeTab===c}]),onClick:ie=>t.activeTab=c},f(v),11,oe)]))),128))]),g(e("div",null,[d(u)],512),[[N,t.activeTab===0]]),g(e("div",null,[d(l)],512),[[N,t.activeTab===1]]),g(e("div",null,[d(r)],512),[[N,t.activeTab===2]])]),_:1})}const we=y(ee,[["render",re]]);export{we as default};
