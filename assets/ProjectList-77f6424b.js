import{o,c as r,F as p,r as y,b as u,a as t,t as h,p as I,d as v,m as $,f,u as x,e as _,g as m,w as g,h as B,i as N}from"./index-31e5b7a2.js";import{L as F,D as G}from"./Layout-c0e45365.js";import{C as M,P as T,S as E,_ as A}from"./adjustments-0001b8e1.js";import{_ as R,a as V}from"./trash-bad6200c.js";import{_ as U}from"./edit-51d5eb37.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as q}from"./plus-3-0d8d5401.js";import"./OverLaye-0858a669.js";import"./search-0186349c.js";const O={props:{list:Array,loading:Boolean},methods:{deleteItem(e){this.$emit("delete_item",e)},editItem(e){this.$emit("edit_item",e)},editStatus(e){this.$emit("edit_status",e)}}},l=e=>(I("data-v-010d26ca"),e=e(),v(),e),W={key:0},z=l(()=>t("td",{class:"count skeleton-element"},null,-1)),H=l(()=>t("td",{class:"project_name skeleton-element"},null,-1)),J=l(()=>t("td",{class:"project_stuactur skeleton-element"},null,-1)),K=l(()=>t("td",{class:"project_address skeleton-element"},null,-1)),Q=l(()=>t("td",{class:"blank"},null,-1)),X=l(()=>t("td",{class:"dropdown skeleton-element"},null,-1)),Y=[z,H,J,K,Q,X],Z={key:0},tt={class:"count"},et={class:"gap-8px text-sm_regular color-Grey_90"},st={class:"project_name"},ot={class:"text-sm_regular color-Grey_90"},at={class:"project_stuactur"},ct={class:"text-sm_regular color-Grey_90"},rt={class:"project_address"},lt={class:"text-sm_regular color-Grey_90 line-clamp-1"},nt=l(()=>t("td",{class:"blank"},null,-1)),it={class:"dropdown"},dt={class:"icon-btn icon-btn_32px custom-dropdown"},_t=l(()=>t("img",{src:R},null,-1)),pt={class:"custom-dropdown-list leftside icon-dropdown"},mt=["onClick"],ut=l(()=>t("div",{class:"dropdown-link"},[t("img",{src:U}),t("p",{class:"dropdown-link-title"}," Edit Project ")],-1)),ht=[ut],gt=["onClick"],jt=l(()=>t("div",{class:"dropdown-link"},[t("img",{src:V}),t("p",{class:"dropdown-link-title required"}," Delete Project ")],-1)),Pt=[jt];function bt(e,s,n,S,a,c){return o(),r(p,null,[(o(),r(p,null,y(6,(i,d)=>(o(),r(p,{key:d},[n.loading?(o(),r("tr",W,Y)):u("",!0)],64))),64)),(o(!0),r(p,null,y(n.list,(i,d)=>(o(),r(p,{key:d},[n.loading?u("",!0):(o(),r("tr",Z,[t("td",tt,[t("p",et,h(d+1),1)]),t("td",st,[t("p",ot,h(i.project_name),1)]),t("td",at,[t("p",ct,h(i.project_no_of_level),1)]),t("td",rt,[t("p",lt,h(i.project_address),1)]),nt,t("td",it,[t("div",dt,[_t,t("ul",pt,[t("li",{class:"dropdown-item",onClick:P=>c.editItem(i.project_id)},ht,8,mt),t("li",{class:"dropdown-item",onClick:P=>c.deleteItem(i.project_id)},Pt,8,gt)])])])]))],64))),128))],64)}const yt=k(O,[["render",bt],["__scopeId","data-v-010d26ca"]]);const w="https://devapi.billionbuild.com",ft={components:{Layout:F,DeleteModel:G,ContentSection:M,Pagination:T,ProjectListRow:yt,SearchBox:E},data(){return{list:[],searchText:"",currentPage:1,totalPages:1,sort:"asc",deleteItemModal:!1,itemId:"",listLoading:!1,listEmpty:!1}},created(){this.projectData();const e=$(),s="Project List |  Billion Build",n="this is description for Project List";e.chnageTitle(s,n)},methods:{addProjectFun(){this.$router.push({name:"Project",params:{projectId:0}})},searchTextFun(e){this.searchText=e.target.value.trim(),this.projectData()},updatePage(e){this.currentPage=e,this.projectData()},changesort(){this.sort=this.sort==="desc"?"asc":"desc",this.projectData()},async projectData(){this.listLoading=!0,this.listEmpty=!1;var e=new FormData;e.append("sort",this.sort),e.append("search",this.searchText),e.append("page_no",this.currentPage);try{const s=await f.post(`${w}/project-list`,e);s.data.length!==0?(this.listLoading=!1,this.list=s.data,this.totalPages=s.total_pages):(this.listEmpty=!0,this.totalPages=1)}catch(s){x().error(s)}},getItemId(e){this.deleteItemModal=!0,this.itemId=e},editItem(e){this.$router.push({name:"Project",params:{projectId:e}})},async deleteItem(){var e=new FormData;e.append("project_id",this.itemId);try{(await f.post(`${w}/project-remove`,e)).success===1&&(this.projectData(),this.deleteItemModal=!1)}catch(s){x().error(s)}}}},j=e=>(I("data-v-c0cb34ec"),e=e(),v(),e),xt=j(()=>t("div",{class:"w-100 margin-bottom_12px"},[t("h2",{class:"title"},"Project List")],-1)),wt={class:"table-options"},It=j(()=>t("img",{src:A},null,-1)),vt={key:0},kt={key:1},St={class:"table-options"},Dt=j(()=>t("img",{src:q},null,-1)),Lt={class:"w-100 user-table"},Ct=j(()=>t("tr",null,[t("td",{class:"count"},[t("p",{class:"text-base_semibold color-Grey_50"},"No.")]),t("td",{class:"project_name"},[t("p",{class:"text-base_semibold color-Grey_50"},"Project Name")]),t("td",{class:"project_stuactur"},[t("p",{class:"text-base_semibold color-Grey_50"},"Project Structure No.")]),t("td",{class:"project_address"},[t("p",{class:"text-base_semibold color-Grey_50"},"Project Address")]),t("td",{class:"blank"}),t("td",{class:"dropdown"},[t("div",{class:"icon-btn icon-btn_32px custom-dropdown"})])],-1));function $t(e,s,n,S,a,c){const i=_("SearchBox"),d=_("ProjectListRow"),P=_("Pagination"),D=_("ContentSection"),L=_("Layout"),C=_("DeleteModel");return o(),r(p,null,[m(L,null,{default:g(()=>[m(D,null,{"table-header":g(()=>[xt,t("div",wt,[t("button",{class:"btn-regular display-flex align-center gap-8px",onClick:s[0]||(s[0]=b=>c.changesort())},[It,a.sort==="asc"?(o(),r("span",vt,"Newest")):u("",!0),a.sort==="desc"?(o(),r("span",kt,"Oldest")):u("",!0)])]),t("div",St,[m(i,{placeholder:"Search Project",value:a.searchText,onInput:c.searchTextFun},null,8,["value","onInput"]),t("button",{class:"btn-regular display-flex align-center w-100 gap-8px text-no-wrap",onClick:s[1]||(s[1]=b=>c.addProjectFun())},[Dt,N(" Add New Project")])])]),"main-table":g(()=>[t("table",Lt,[t("tbody",null,[Ct,m(d,{list:a.list,onDelete_item:c.getItemId,onEdit_item:c.editItem,loading:a.listLoading},null,8,["list","onDelete_item","onEdit_item","loading"])])])]),"table-footer":g(()=>[m(P,{currentPage:a.currentPage,totalPages:a.totalPages,onUpdatePage:c.updatePage},null,8,["currentPage","totalPages","onUpdatePage"])]),_:1})]),_:1}),a.deleteItemModal?(o(),B(C,{key:0,model_title:"Delete Customer",model_subtitle:"Are you sure you want to delete this Customer?",onClose_model:s[2]||(s[2]=b=>a.deleteItemModal=!1),onDelete_item:s[3]||(s[3]=b=>c.deleteItem())})):u("",!0)],64)}const Vt=k(ft,[["render",$t],["__scopeId","data-v-c0cb34ec"]]);export{Vt as default};
