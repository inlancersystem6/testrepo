import{_ as S,o as a,c as n,F as b,j as w,i as c,a as t,t as m,p as P,k as D,u as T,f,g,r as _,b as u,w as I,h as G}from"./index-5d175349.js";import{L,D as B}from"./Layout-feaff5d7.js";import{C as E,S as A,P as F,_ as U}from"./adjustments-5072e001.js";import{_ as j,a as R}from"./trash-bad6200c.js";import{_ as V}from"./edit-51d5eb37.js";import{T as z}from"./TextArea-d58f5809.js";import{_ as q}from"./debounce-dc4ebcc5.js";import{_ as W}from"./no-data-9a9520f2.js";import"./OverLaye-142172c4.js";import"./search-0186349c.js";const H={props:{list:Array,loading:Boolean},methods:{deleteItem(e){this.$emit("delete_item",e)},editItem(e){this.$emit("edit_item",e)},editStatus(e,o){this.$emit("edit_status",e,o)},editReminder(e){this.$router.push({name:"AddReminder",params:{reminderId:e}})}}},d=e=>(P("data-v-1236f8c8"),e=e(),D(),e),J={key:0},K=d(()=>t("td",{class:"count skeleton-element"},null,-1)),Q=d(()=>t("td",{class:"user_name skeleton-element"},null,-1)),X=d(()=>t("td",{class:"user_email skeleton-element"},null,-1)),Y=d(()=>t("td",{class:"user_address skeleton-element"},null,-1)),Z=d(()=>t("td",{class:"blank"},null,-1)),tt=d(()=>t("td",{class:"user-status skeleton-element"},null,-1)),et=d(()=>t("td",{class:"dropdown skeleton-element"},null,-1)),ot=[K,Q,X,Y,Z,tt,et],st={key:0},at={class:"count"},nt={class:"gap-8px text-base_semibold color-Grey_90"},rt={class:"user_name"},it={class:"text-base_semibold color-Grey_90"},lt={class:"user_email"},dt={class:"text-base_semibold color-Grey_90"},ct={class:"user_address"},pt={class:"text-base_semibold color-Grey_90 line-clamp-1"},_t=d(()=>t("td",{class:"blank"},null,-1)),ut={class:"user-status"},ht={key:0,class:"btn-regular display-flex align-center gap-8px"},mt=d(()=>t("div",{class:"ellipse-dot bg-rose"},null,-1)),gt={class:"text-sm_medium color-Grey_60 capitalize"},bt={key:1,class:"btn-regular display-flex align-center gap-8px"},yt=d(()=>t("div",{class:"ellipse-dot bg-emerald"},null,-1)),vt={class:"text-sm_medium color-Grey_60 capitalize"},ft={class:"dropdown"},xt={class:"icon-btn icon-btn_32px custom-dropdown"},kt=d(()=>t("img",{src:j},null,-1)),It={class:"custom-dropdown-list leftside icon-dropdown"},wt=["onClick"],St=d(()=>t("div",{class:"dropdown-link"},[t("img",{src:V}),t("p",{class:"dropdown-link-title"}," Edit Operation ")],-1)),Pt=[St],Dt=["onClick"],Ot=d(()=>t("div",{class:"dropdown-link"},[t("img",{src:R}),t("p",{class:"dropdown-link-title required"}," Delete Operation ")],-1)),Ct=[Ot],Nt=["onClick"],$t=d(()=>t("div",{class:"dropdown-link"},[t("p",{class:"w20"}),t("p",{class:"dropdown-link-title"}," Pending ")],-1)),Mt=[$t],Tt=["onClick"],Gt=d(()=>t("div",{class:"dropdown-link"},[t("p",{class:"w20"}),t("p",{class:"dropdown-link-title"}," complete ")],-1)),Lt=[Gt];function Bt(e,o,s,y,r,l){return a(),n(b,null,[(a(),n(b,null,w(6,(i,h)=>(a(),n(b,{key:h},[s.loading?(a(),n("tr",J,ot)):c("",!0)],64))),64)),(a(!0),n(b,null,w(s.list,(i,h)=>(a(),n(b,{key:h},[s.loading?c("",!0):(a(),n("tr",st,[t("td",at,[t("p",nt,m(h+1),1)]),t("td",rt,[t("p",it,m(i.opern_inv),1)]),t("td",lt,[t("p",dt,m(i.opern_date),1)]),t("td",ct,[t("p",pt,m(i.opern_notes),1)]),_t,t("td",ut,[i.opern_status_id===1?(a(),n("button",ht,[mt,t("p",gt,m(i.opern_status),1)])):c("",!0),i.opern_status_id===2?(a(),n("button",bt,[yt,t("p",vt,m(i.opern_status),1)])):c("",!0)]),t("td",ft,[t("div",xt,[kt,t("ul",It,[t("li",{class:"dropdown-item",onClick:v=>l.editItem(i.opern_id)},Pt,8,wt),t("li",{class:"dropdown-item",onClick:v=>l.deleteItem(i.opern_id)},Ct,8,Dt),i.opern_status_id===2&&i.opern_status_id!==2?(a(),n("li",{key:0,class:"dropdown-item",onClick:v=>l.editStatus(i.opern_id,1)},Mt,8,Nt)):c("",!0),i.opern_status_id===1?(a(),n("li",{key:1,class:"dropdown-item",onClick:v=>l.editStatus(i.opern_id,2)},Lt,8,Tt)):c("",!0)])])])]))],64))),128))],64)}const Et=S(H,[["render",Bt],["__scopeId","data-v-1236f8c8"]]);const x="https://devapi.billionbuild.com",At={components:{Layout:L,ContentSection:E,SearchBox:A,Pagination:F,Operations:Et,DeleteModel:B,TextArea:z},data(){return{list:[],searchText:"",currentPage:1,totalPages:1,sort:"asc",deleteItemModal:!1,itemId:"",operationModal:!1,operationNote:"",operationId:"",operationInvId:"",operationType:"",operationProId:"",listLoading:!1,listEmpty:!1}},computed:{addOperationBtn(){return!this.operationNote.trim()}},created(){this.operationData();const e=T(),o="Operations |  Billion Build",s="this is description for Operations";e.chnageTitle(o,s)},methods:{searchTextFun:q(function(e){this.searchText=e.target.value.trim(),this.operationData()},400),clearSearch(){this.searchText="",this.operationData()},updatePage(e){this.currentPage=e,this.operationData()},changesort(){this.sort=this.sort==="desc"?"asc":"desc",this.operationData()},async operationData(){this.listLoading=!0,this.listEmpty=!1;var e=new FormData;e.append("operation_id",""),e.append("sort",this.sort),e.append("search",this.searchText),e.append("page_no",this.currentPage);try{const o=await f.post(`${x}/operation-list`,e);o.data.length!==0?(this.listLoading=!1,this.list=o.data,this.totalPages=o.total_pages):(g().error("No Data Available"),this.listEmpty=!0,this.totalPages=1)}catch(o){g().error(o)}},async statusUpdate(e,o){var s=new FormData;s.append("operation_id",e),s.append("operation_status",o);try{(await f.post(`${x}/operation-status`,s)).success===1&&this.operationData()}catch(y){g().error(y)}},getItemId(e){this.deleteItemModal=!0,this.itemId=e},async editItem(e){this.operationModal=!0,this.operationId=e;var o=new FormData;o.append("operation_id",this.operationId),o.append("search",this.searchText),o.append("page_no",this.currentPage);try{const s=await f.post(`${x}/operation-list`,o);this.operationNote=s.data.opern_notes,this.operationInvId=s.data.opern_inv_id,this.operationType=s.data.opern_type,this.operationProId=s.data.opern_proj,this.totalPages=s.total_pages}catch(s){g().error(s)}},async addOperation(){var e=new FormData;e.append("inventory_id",this.operationInvId),e.append("operation_id",this.operationId),e.append("operation_notes",this.operationNote),e.append("operation_type",this.operationType),e.append("project_id",this.operationProId);try{(await f.post(`${x}/add-operation`,e)).success===1&&(this.operationModal=!1,this.operationId="",this.operationNote="",this.operationInvId="",this.operationType="",this.operationProId="",this.operationData())}catch(o){g().error(o)}},async deleteItem(){var e=new FormData;e.append("operation_id",this.itemId);try{(await f.post(`${x}/remove-operation`,e)).success===1&&(this.operationData(),this.deleteItemModal=!1)}catch(o){g().error(o)}}}},k=e=>(P("data-v-fcb82f0a"),e=e(),D(),e),Ft=k(()=>t("div",{class:"w-100 margin-bottom_12px"},[t("h2",{class:"title"},"Operation List")],-1)),Ut={class:"table-options"},jt=k(()=>t("img",{src:U},null,-1)),Rt={key:0},Vt={key:1},zt={class:"table-options"},qt={key:0,class:"data-not-found border-b border-Grey_20 border-solid"},Wt=k(()=>t("img",{src:W},null,-1)),Ht=[Wt],Jt={key:1,class:"w-100 user-table"},Kt=k(()=>t("tr",null,[t("td",{class:"count"},[t("p",{class:"text-base_semibold color-Grey_50"},"No.")]),t("td",{class:"user_name"},[t("p",{class:"text-base_semibold color-Grey_50"}," Operation Name")]),t("td",{class:"user_email"},[t("p",{class:"text-base_semibold color-Grey_50"},"Operation Date")]),t("td",{class:"user_address"},[t("p",{class:"text-base_semibold color-Grey_50 line-clamp-1"},"Operation Note")]),t("td",{class:"blank"}),t("td",{class:"user-status"},[t("p",{class:"text-base_semibold color-Grey_50 line-clamp-1"},"Operation Status")]),t("td",{class:"dropdown"},[t("div",{class:"icon-btn icon-btn_32px custom-dropdown"})])],-1)),Qt={key:0,class:"status-chnageBox"},Xt={class:"w-full border border-solid border-Grey_20 rounded-regualr bg-white"},Yt=k(()=>t("div",{class:"w-full border-b border-solid border-Gray_20"},[t("div",{class:"padding-y_8px padding-x_16px"},[t("h4",null,"Edit Operation")])],-1)),Zt={class:"padding-y_12px padding-x_16px space-y-4"},te={class:"space-y-4px"},ee={class:"w-full border-t border-solid border-Gray_20"},oe={class:"padding-y_8px padding-x_16px flex items-center justify-end gap-8px"},se=["disabled"];function ae(e,o,s,y,r,l){const i=_("SearchBox"),h=_("Operations"),v=_("Pagination"),O=_("ContentSection"),C=_("Label"),N=_("TextArea"),$=_("Layout"),M=_("DeleteModel");return a(),n(b,null,[u($,null,{default:I(()=>[u(O,null,{"table-header":I(()=>[Ft,t("div",Ut,[t("button",{class:"btn-regular display-flex align-center gap-8px",onClick:o[0]||(o[0]=p=>l.changesort())},[jt,r.sort==="asc"?(a(),n("span",Rt,"Newest")):c("",!0),r.sort==="desc"?(a(),n("span",Vt,"Oldest")):c("",!0)])]),t("div",zt,[u(i,{placeholder:"Search Note",value:r.searchText,onInput:l.searchTextFun,onClear_search:l.clearSearch},null,8,["value","onInput","onClear_search"])])]),"main-table":I(()=>[r.listEmpty?(a(),n("div",qt,Ht)):c("",!0),r.listEmpty?c("",!0):(a(),n("table",Jt,[t("tbody",null,[Kt,u(h,{list:r.list,onDelete_item:l.getItemId,onEdit_item:l.editItem,onEdit_status:l.statusUpdate,loading:r.listLoading},null,8,["list","onDelete_item","onEdit_item","onEdit_status","loading"])])]))]),"table-footer":I(()=>[u(v,{currentPage:r.currentPage,totalPages:r.totalPages,onUpdatePage:l.updatePage},null,8,["currentPage","totalPages","onUpdatePage"])]),_:1}),r.operationModal?(a(),n("div",Qt,[t("div",Xt,[Yt,t("div",Zt,[t("div",te,[u(C,{label:"operatio Note"}),u(N,{placeholder:"Enter operatio Note",id:"operatio Note",value:r.operationNote,onInput:o[1]||(o[1]=p=>r.operationNote=p.target.value)},null,8,["value"])])]),t("div",ee,[t("div",oe,[t("button",{class:"btn-regular",onClick:o[2]||(o[2]=p=>this.operationModal=!this.operationModal)},"Cancel"),t("button",{class:"btn-regular bg-purple color-white",disabled:l.addOperationBtn,onClick:o[3]||(o[3]=(...p)=>l.addOperation&&l.addOperation(...p))},"Save Operation",8,se)])])])])):c("",!0),r.operationModal?(a(),n("div",{key:1,class:"overlay",onClick:o[4]||(o[4]=p=>this.operationModal=!this.operationModal)})):c("",!0)]),_:1}),r.deleteItemModal?(a(),G(M,{key:0,model_title:"Delete Operation",model_subtitle:"Are you sure you want to delete this Operation?",onClose_model:o[5]||(o[5]=p=>r.deleteItemModal=!1),onDelete_item:o[6]||(o[6]=p=>l.deleteItem())})):c("",!0)],64)}const me=S(At,[["render",ae],["__scopeId","data-v-fcb82f0a"]]);export{me as default};
