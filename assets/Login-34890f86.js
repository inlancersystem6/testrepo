import{F as S,a as x,b as T}from"./vee-validate.esm-cbc5801a.js";import{_ as k,u as _,g as m,r as h,o,c as b,a as e,h as i,w as f,i as n,F as P,t as y,n as N,d as O,p as w,k as E}from"./index-5d175349.js";import{O as M}from"./OverLaye-142172c4.js";import{E as I}from"./ErrorMessage-d5a29056.js";const B="https://devapi.billionbuild.com",F={components:{OverLaye:M,Field:S,Form:x,ErrorMessage:I},data(){return{number:"",overlay:!1,fromSubmited:!1,errorMesgShow:!1,errorMsg:"",getotp:!0,sendotp:!1,otp:"",verifyOTPloader:!1,resendOTP:!0,remainingTime:30}},created(){const r=_(),t="Sign In |  Billion Build",a="this is description for Sign In";r.chnageTitle(t,a)},computed:{loginBtn(){return this.number.trim().length!==10||isNaN(this.number)},otpBtn(){return this.otp.trim().length!==5||isNaN(this.otp)},maskedNumber(){if(this.number.length<8)return this.number;const r=4,t=this.number.length-r*2,a="*".repeat(t),p=this.number.substring(0,r),s=this.number.substring(this.number.length-r);return`${p}${a}${s}`}},methods:{async onSubmit(){this.fromSubmited=!0,this.verifyOTPloader=!0,this.errorMesgShow=!1;const r=_(),t=this.number,a=this.otp;await r.login(t,a)},checkUser(){localStorage.getItem("userToken")&&this.$router.push({name:"home"})},async login(){this.fromSubmited=!0,this.errorMesgShow=!1;var r=new FormData;r.append("user_mobile",this.number),this.resendOTP=!0;try{const t=await T.post(`${B}/get-otp`,r);t.data.success===1?(this.sendotp=!0,this.getotp=!1,this.fromSubmited=!1,this.otp=String(t.data.data),m().success(t.data.message),this.remainingTime=30,setTimeout(()=>{this.resendOTP=!1},3e4),this.updateTimer()):(this.errorMesgShow=!0,this.errorMsg=t.data.message,this.sendotp=!1,this.getotp=!0,this.number="",m().error(t.data.message))}catch(t){m().error(t)}},updateTimer(){const r=setInterval(()=>{this.remainingTime--,this.remainingTime<=0&&clearInterval(r)},1e3)}}},d=r=>(w("data-v-ad0601f4"),r=r(),E(),r),C={class:"auth-page auth-page_center"},L={class:"auth-container"},V={class:"auth-from-section"},G=d(()=>e("div",{class:"space-y-4px auth-title"},[e("h1",{class:"color-Grey_90 text-2xl_semibold"},"Enter your Phone!"),e("h6",{class:"color-Grey_50 text-base_regular"}," Enter your phone no to verify it. ")],-1)),U={class:"input-group"},D=d(()=>e("label",{for:""},"Phone No.",-1)),z=["value"],A={class:"space-y-8px"},q=["disabled"],R={class:"space-y-4px auth-title"},j=d(()=>e("h1",{class:"color-Grey_90 text-2xl_semibold"},"OTP Verification",-1)),H={class:"color-Grey_50 text-base_regular"},J={class:"input-group"},K=["value"],Q={class:"space-y-8px"},W=["disabled"],X={class:"text-right mt-4"},Y={class:"color-Grey_50 text-base_regular"},Z=["disabled"],$={key:0};function ee(r,t,a,p,s,l){const u=h("ErrorMessage"),g=h("Form"),v=h("OverLaye");return o(),b(P,null,[e("div",C,[e("div",L,[e("div",V,[s.getotp?(o(),i(g,{key:0,onSubmit:l.login,class:"from space-y-24px"},{default:f(()=>[G,e("div",U,[D,e("input",{name:"number",class:"input-1",type:"text",placeholder:"Enter Phone No",onInput:t[0]||(t[0]=c=>s.number=c.target.value),value:s.number},null,40,z),s.number&&isNaN(s.number)?(o(),i(u,{key:0,msg:"Enter only number"})):n("",!0),this.number.trim().length>10&&this.number.trim()?(o(),i(u,{key:1,msg:"Plz Enter Valid number"})):n("",!0),this.errorMesgShow?(o(),i(u,{key:2,msg:this.errorMsg},null,8,["msg"])):n("",!0)]),e("div",A,[e("button",{type:"submit",class:"btn-regular btn-w-full",disabled:l.loginBtn},"Continue",8,q)])]),_:1},8,["onSubmit"])):n("",!0),s.sendotp?(o(),i(g,{key:1,onSubmit:l.onSubmit,class:"from space-y-24px"},{default:f(()=>[e("div",R,[j,e("h6",H,"Enter OTP code sent to "+y(l.maskedNumber),1)]),e("div",J,[e("input",{name:"otp",class:"input-1",type:"text",placeholder:"Enter otp",onInput:t[1]||(t[1]=c=>s.otp=c.target.value),value:s.otp},null,40,K),s.otp&&isNaN(s.otp)?(o(),i(u,{key:0,msg:"Enter only number"})):n("",!0),!this.otp&&s.fromSubmited?(o(),i(u,{key:1,msg:"otp Is reqired"})):n("",!0),s.errorMesgShow?(o(),i(u,{key:2,msg:s.errorMsg},null,8,["msg"])):n("",!0)]),e("div",Q,[e("button",{type:"submit",class:N(["btn-regular btn-w-full",{"is-loading":s.verifyOTPloader}]),disabled:l.otpBtn},"Verify & Proceed",10,W),e("div",X,[e("p",Y,[O("Didn't receive OTP ? "),e("button",{onClick:t[2]||(t[2]=(...c)=>l.login&&l.login(...c)),type:"button",class:"color_violet resentBtn",disabled:s.resendOTP},"Resend OTP ! ",8,Z),s.remainingTime>0?(o(),b("span",$,"in "+y(s.remainingTime),1)):n("",!0)])])])]),_:1},8,["onSubmit"])):n("",!0)])])]),s.overlay?(o(),i(v,{key:0})):n("",!0)],64)}const ne=k(F,[["render",ee],["__scopeId","data-v-ad0601f4"]]);export{ne as default};
