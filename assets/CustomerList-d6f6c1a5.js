import{o as n,d as i,F as b,e as I,f as u,a as e,t as p,p as S,g as $,u as G,h as v,i as k,r as _,j as m,w as h,c as C,b as B}from"./index-38024ad5.js";import{L as U,D as R}from"./Layout-200f36b8.js";import{C as V,S as j,P as q,_ as H}from"./adjustments-e0be9a7b.js";import{_ as O,a as W}from"./trash-bad6200c.js";import{_ as Y}from"./edit-51d5eb37.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import{T as z}from"./TextArea-abd90eb3.js";import{L as J}from"./Label-dfa7b7c9.js";import{M as K}from"./Modal-e622034b.js";import{_ as Q}from"./plus-3-0d8d5401.js";import"./OverLaye-d6a130a2.js";import"./search-0186349c.js";const X="/assets/clock-e9ae3bcf.svg";const Z={props:{list:Array,loading:Boolean},methods:{deleteItem(t){this.$emit("delete_item",t)},editItem(t){this.$emit("edit_item",t)},editStatus(t){this.$emit("edit_status",t)},editReminder(t){this.$emit("add_reminder",t)}}},d=t=>(S("data-v-b8d3e3a7"),t=t(),$(),t),ee=d(()=>e("td",{class:"count skeleton-element"},null,-1)),te=d(()=>e("td",{class:"user_name"},[e("div",{class:"flex items-center gap-2.5"},[e("div",{class:"user-img skeleton-element"}),e("p",{class:"text-base_semibold flex-1 color-Grey_90 skeleton-element"})])],-1)),se=d(()=>e("td",{class:"user_email skeleton-element"},null,-1)),oe=d(()=>e("td",{class:"user_number skeleton-element"},null,-1)),ae=d(()=>e("td",{class:"user_address skeleton-element"},null,-1)),re=d(()=>e("td",{class:"blank"},null,-1)),le=d(()=>e("td",{class:"user-status skeleton-element"},null,-1)),ne=d(()=>e("td",{class:"dropdown skeleton-element"},null,-1)),de=[ee,te,se,oe,ae,re,le,ne],ie={key:0},ce={class:"count"},_e={class:"gap-8px text-sm_regular color-Grey_90"},me={class:"user_name"},ue={class:"display-flex align-center gap-14px"},pe=["src"],he={key:1,src:"https://ps.w.org/user-avatar-reloaded/assets/icon-256x256.png?rev=2540745",class:"user-img"},ge={class:"text-sm_regular color-Grey_90 line-clamp-1"},be={class:"user_email"},fe={class:"text-sm_regular color-Grey_90"},ye={class:"user_number"},xe={class:"text-sm_regular color-Grey_90"},ve={class:"user_address"},ke={class:"text-sm_regular color-Grey_90 line-clamp-1"},we=d(()=>e("td",{class:"blank"},null,-1)),Ce={class:"user-status"},De={class:"text-sm_regular color-Grey_90 line-clamp-1"},Ie={class:"dropdown"},Se={class:"icon-btn icon-btn_32px custom-dropdown"},$e=d(()=>e("img",{src:O},null,-1)),Me={class:"custom-dropdown-list leftside icon-dropdown"},Pe=["onClick"],Le=d(()=>e("div",{class:"dropdown-link"},[e("img",{src:Y}),e("p",{class:"dropdown-link-title"}," Edit Customer ")],-1)),Ne=[Le],Ae=["onClick"],Fe=d(()=>e("div",{class:"dropdown-link"},[e("img",{src:X}),e("p",{class:"dropdown-link-title"}," Add Follow Up ")],-1)),Ee=[Fe],Te=["onClick"],Ge=d(()=>e("div",{class:"dropdown-link"},[e("img",{src:W}),e("p",{class:"dropdown-link-title required"}," Delete Customer ")],-1)),Be=[Ge];function Ue(t,s,l,f,o,a){return n(),i(b,null,[(n(),i(b,null,I(6,(r,g)=>(n(),i(b,null,[l.loading?(n(),i("tr",{key:g},de)):u("",!0)],64))),64)),(n(!0),i(b,null,I(l.list,(r,g)=>(n(),i(b,{key:g},[l.loading?u("",!0):(n(),i("tr",ie,[e("td",ce,[e("p",_e,p(g+1),1)]),e("td",me,[e("div",ue,[r.cus_profile?(n(),i("img",{key:0,src:r.cus_profile,class:"user-img"},null,8,pe)):u("",!0),r.cus_profile?u("",!0):(n(),i("img",he)),e("p",ge,p(r.cus_first_name)+" "+p(r.cus_last_name),1)])]),e("td",be,[e("p",fe,p(r.cus_email),1)]),e("td",ye,[e("p",xe,p(r.cus_phone_no),1)]),e("td",ve,[e("p",ke,p(r.cus_address),1)]),we,e("td",Ce,[e("p",De,p(r.follow_up),1)]),e("td",Ie,[e("div",Se,[$e,e("ul",Me,[e("li",{class:"dropdown-item",onClick:x=>a.editItem(r.cus_id)},Ne,8,Pe),e("li",{class:"dropdown-item",onClick:x=>a.editReminder(r.cus_id)},Ee,8,Ae),e("li",{class:"dropdown-item",onClick:x=>a.deleteItem(r.cus_id)},Be,8,Te)])])])]))],64))),128))],64)}const Re=M(Z,[["render",Ue],["__scopeId","data-v-b8d3e3a7"]]);const w="https://devapi.billionbuild.com",Ve={components:{Layout:U,ContentSection:V,SearchBox:j,Pagination:q,Customers:Re,DeleteModel:R,Modal:K,TextArea:z,Label:J},data(){return{list:[],searchText:"",currentPage:1,totalPages:1,sort:"asc",deleteItemModal:!1,itemId:"",remDate:"",remNote:"",reminderModal:!1,listLoading:!1,listEmpty:!1}},created(){this.customerData();const t=G(),s="Customer List |  Billion Build",l="this is description for Customer List";t.chnageTitle(s,l)},computed:{remBtnDisabled(){const t=/[!@#$%^&*()?":{}|<>]/;return!this.remDate||!this.remNote.trim()||t.test(this.remNote)},formattedDate(){const t=new Date(this.remDate),s=t.getFullYear(),l=`0${t.getMonth()+1}`.slice(-2),f=`0${t.getDate()}`.slice(-2),o=`0${t.getHours()}`.slice(-2),a=`0${t.getMinutes()}`.slice(-2),r=`0${t.getSeconds()}`.slice(-2);return`${s}-${l}-${f} ${o}:${a}:${r}`}},methods:{addUserFun(){this.$router.push({name:"AddCustomer"})},searchTextFun(t){this.searchText=t.target.value.trim(),this.customerData()},updatePage(t){this.currentPage=t,this.customerData()},changesort(){this.sort=this.sort==="desc"?"asc":"desc",this.customerData()},async customerData(){this.listLoading=!0,this.listEmpty=!1;var t=new FormData;t.append("cus_id",""),t.append("sort",this.sort),t.append("search",this.searchText),t.append("page_no",this.currentPage);try{const s=await v.post(`${w}/customer-list`,t);s.data.length!==0?(this.listLoading=!1,this.list=s.data,this.totalPages=s.total_pages):(this.listEmpty=!0,this.totalPages=1)}catch(s){k().error(s)}},async statusUpdate(t){var s=new FormData;s.append("cus_id",t);try{(await v.post(`${w}/customer-status`,s)).success===1&&this.customerData()}catch(l){k().error(l)}},getItemId(t){this.deleteItemModal=!0,this.itemId=t},editItem(t){this.$router.push({name:"EditCustomer",params:{id:t}})},async deleteItem(){var t=new FormData;t.append("cus_id",this.itemId);try{(await v.post(`${w}/remove-customer`,t)).success===1&&(this.customerData(),this.deleteItemModal=!1)}catch(s){k().error(s)}},addReminderId(t){this.itemId=t,this.reminderModal=!0},async addReminder(){var t=new FormData;t.append("rem_id",""),t.append("rem_self",""),t.append("cus_id",this.itemId),t.append("rem_notes",this.remNote);const s=this.formattedDate;t.append("rem_date",s);try{(await v.post(`${w}/add-reminder`,t)).success===1&&(this.customerData(),this.reminderModal=!1,this.itemId="")}catch(l){k().error(l)}}}},y=t=>(S("data-v-d9764ef9"),t=t(),$(),t),je=y(()=>e("div",{class:"w-100 margin-bottom_12px"},[e("h2",{class:"title"},"Customer List")],-1)),qe={class:"table-options"},He=y(()=>e("img",{src:H},null,-1)),Oe={key:0},We={key:1},Ye={class:"table-options"},ze=y(()=>e("img",{src:Q},null,-1)),Je={class:"w-100 user-table"},Ke=y(()=>e("tr",null,[e("td",{class:"count"},[e("p",{class:"text-base_semibold color-Grey_50"},"No.")]),e("td",{class:"user_name"},[e("p",{class:"text-base_semibold color-Grey_50"},"Customer Name")]),e("td",{class:"user_email"},[e("p",{class:"text-base_semibold color-Grey_50"},"Customer Email")]),e("td",{class:"user_number"},[e("p",{class:"text-base_semibold color-Grey_50"},"Mobile No.")]),e("td",{class:"user_number"},[e("p",{class:"text-base_semibold color-Grey_50"},"Customer Address")]),e("td",{class:"blank"}),e("td",{class:"user-status"},[e("p",{class:"text-base_semibold color-Grey_50"},"Follow Ups Counts")]),e("td",{class:"dropdown"},[e("div",{class:"icon-btn icon-btn_32px custom-dropdown"})])],-1)),Qe=y(()=>e("h4",null,"Add Follow Up",-1)),Xe={class:"padding-y_12px padding-x_16px"},Ze={class:"space-y-4"},et={class:"space-y-8px col-span-1"},tt={class:"space-y-8px col-span-2"},st=["disabled"];function ot(t,s,l,f,o,a){const r=_("SearchBox"),g=_("Customers"),x=_("Pagination"),P=_("ContentSection"),D=_("Label"),L=_("VDatePicker"),N=_("ErrorMessage"),A=_("TextArea"),F=_("Modal"),E=_("Layout"),T=_("DeleteModel");return n(),i(b,null,[m(E,null,{default:h(()=>[m(P,null,{"table-header":h(()=>[je,e("div",qe,[e("button",{class:"btn-regular display-flex align-center gap-8px",onClick:s[0]||(s[0]=c=>a.changesort())},[He,o.sort==="asc"?(n(),i("span",Oe,"Newest")):u("",!0),o.sort==="desc"?(n(),i("span",We,"Oldest")):u("",!0)])]),e("div",Ye,[m(r,{placeholder:"Search Customer",value:o.searchText,onInput:a.searchTextFun},null,8,["value","onInput"]),e("button",{class:"btn-regular display-flex align-center w-100 gap-8px text-no-wrap",onClick:s[1]||(s[1]=c=>a.addUserFun())},[ze,B(" Add New Customer")])])]),"main-table":h(()=>[e("table",Je,[e("tbody",null,[Ke,m(g,{list:o.list,onDelete_item:a.getItemId,onEdit_item:a.editItem,onEdit_status:a.statusUpdate,onAdd_reminder:a.addReminderId,loading:o.listLoading},null,8,["list","onDelete_item","onEdit_item","onEdit_status","onAdd_reminder","loading"])])])]),"table-footer":h(()=>[m(x,{currentPage:o.currentPage,totalPages:o.totalPages,onUpdatePage:a.updatePage},null,8,["currentPage","totalPages","onUpdatePage"])]),_:1}),o.reminderModal?(n(),C(F,{key:0,onCloseModal:s[6]||(s[6]=c=>this.reminderModal=!this.reminderModal)},{header:h(()=>[Qe]),footer:h(()=>[e("button",{class:"btn-regular",onClick:s[4]||(s[4]=c=>this.reminderModal=!this.reminderModal)},"Cancel"),e("button",{class:"btn-regular bg-purple color-white",disabled:a.remBtnDisabled,onClick:s[5]||(s[5]=(...c)=>a.addReminder&&a.addReminder(...c))},"Add Follow Up",8,st)]),default:h(()=>[e("div",Xe,[e("div",Ze,[e("div",et,[m(D,{label:"Select Date"}),m(L,{modelValue:o.remDate,"onUpdate:modelValue":s[2]||(s[2]=c=>o.remDate=c),color:"sky-blue",attributes:t.attributes,mode:"dateTime",onChange:t.highlightSelectedDate,expanded:""},null,8,["modelValue","attributes","onChange"]),!o.remDate&&t.formSubmitted?(n(),C(N,{key:0,msg:""})):u("",!0)]),e("div",tt,[m(D,{label:"Note (optional)"}),m(A,{placeholder:"Enter Reminder Note",id:"Note (optional)",value:o.remNote,onInput:s[3]||(s[3]=c=>o.remNote=c.target.value)},null,8,["value"])])])])]),_:1})):u("",!0)]),_:1}),o.deleteItemModal?(n(),C(T,{key:0,model_title:"Delete Customer",model_subtitle:"Are you sure you want to delete this Customer?",onClose_model:s[7]||(s[7]=c=>o.deleteItemModal=!1),onDelete_item:s[8]||(s[8]=c=>a.deleteItem())})):u("",!0)],64)}const gt=M(Ve,[["render",ot],["__scopeId","data-v-d9764ef9"]]);export{gt as default};
