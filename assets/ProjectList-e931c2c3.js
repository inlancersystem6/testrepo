import{_ as w,o as r,c as a,F as m,j as f,i as d,a as t,t as j,p as I,k as v,u as $,f as x,g as u,r as p,b as h,w as b,h as B,d as E}from"./index-5d175349.js";import{L as G,D as M}from"./Layout-feaff5d7.js";import{C as N,P as T,S as F,_ as A}from"./adjustments-5072e001.js";import{_ as R,a as V}from"./trash-bad6200c.js";import{_ as U}from"./edit-51d5eb37.js";import{_ as q}from"./debounce-dc4ebcc5.js";import{_ as O}from"./plus-3-0d8d5401.js";import{_ as W}from"./no-data-9a9520f2.js";import"./OverLaye-142172c4.js";import"./search-0186349c.js";const z={props:{list:Array,loading:Boolean},methods:{deleteItem(e){this.$emit("delete_item",e)},editItem(e){this.$emit("edit_item",e)},editStatus(e){this.$emit("edit_status",e)}}},n=e=>(I("data-v-6206acc6"),e=e(),v(),e),H={key:0},J=n(()=>t("td",{class:"count skeleton-element"},null,-1)),K=n(()=>t("td",{class:"project_name skeleton-element"},null,-1)),Q=n(()=>t("td",{class:"project_stuactur skeleton-element"},null,-1)),X=n(()=>t("td",{class:"project_address skeleton-element"},null,-1)),Y=n(()=>t("td",{class:"blank"},null,-1)),Z=n(()=>t("td",{class:"dropdown skeleton-element"},null,-1)),tt=[J,K,Q,X,Y,Z],et={key:0},st={class:"count"},ot={class:"gap-8px text-sm_regular color-Grey_90"},rt={class:"project_name"},at={class:"text-sm_regular color-Grey_90"},ct={class:"project_stuactur"},lt={class:"text-sm_regular color-Grey_90"},nt={class:"project_address"},it={class:"text-sm_regular color-Grey_90 line-clamp-1"},dt=n(()=>t("td",{class:"blank"},null,-1)),_t={class:"dropdown"},pt={class:"icon-btn icon-btn_32px custom-dropdown"},mt=n(()=>t("img",{src:R},null,-1)),ut={class:"custom-dropdown-list leftside icon-dropdown"},ht=["onClick"],gt=n(()=>t("div",{class:"dropdown-link"},[t("img",{src:U}),t("p",{class:"dropdown-link-title"}," Edit Project ")],-1)),jt=[gt],bt=["onClick"],Pt=n(()=>t("div",{class:"dropdown-link"},[t("img",{src:V}),t("p",{class:"dropdown-link-title required"}," Delete Project ")],-1)),yt=[Pt];function ft(e,s,c,S,o,l){return r(),a(m,null,[(r(),a(m,null,f(6,(i,_)=>(r(),a(m,{key:_},[c.loading?(r(),a("tr",H,tt)):d("",!0)],64))),64)),(r(!0),a(m,null,f(c.list,(i,_)=>(r(),a(m,{key:_},[c.loading?d("",!0):(r(),a("tr",et,[t("td",st,[t("p",ot,j(_+1),1)]),t("td",rt,[t("p",at,j(i.project_name),1)]),t("td",ct,[t("p",lt,j(i.project_no_of_level),1)]),t("td",nt,[t("p",it,j(i.project_address),1)]),dt,t("td",_t,[t("div",pt,[mt,t("ul",ut,[t("li",{class:"dropdown-item",onClick:P=>l.editItem(i.project_id)},jt,8,ht),t("li",{class:"dropdown-item",onClick:P=>l.deleteItem(i.project_id)},yt,8,bt)])])])]))],64))),128))],64)}const xt=w(z,[["render",ft],["__scopeId","data-v-6206acc6"]]);const k="https://devapi.billionbuild.com",kt={components:{Layout:G,DeleteModel:M,ContentSection:N,Pagination:T,ProjectListRow:xt,SearchBox:F},data(){return{breadcrumbList:[{name:"Dashboard",link:"/"},{name:"Settings",link:"/settings"},{name:"Projects"}],list:[],searchText:"",currentPage:1,totalPages:1,sort:"asc",deleteItemModal:!1,itemId:"",listLoading:!1,listEmpty:!1}},created(){this.projectData();const e=$(),s="Project List |  Billion Build",c="this is description for Project List";e.chnageTitle(s,c)},methods:{addProjectFun(){this.$router.push({name:"Project",params:{projectId:0}})},searchTextFun:q(function(e){this.searchText=e.target.value.trim(),this.projectData()},400),clearSearch(){this.searchText="",this.projectData()},updatePage(e){this.currentPage=e,this.projectData()},changesort(){this.sort=this.sort==="desc"?"asc":"desc",this.projectData()},async projectData(){this.listLoading=!0,this.listEmpty=!1;var e=new FormData;e.append("sort",this.sort),e.append("search",this.searchText),e.append("page_no",this.currentPage);try{const s=await x.post(`${k}/project-list`,e);s.data&&s.data.length!==0?(this.listLoading=!1,this.list=s.data,this.totalPages=s.total_pages):(u().error(s.message),this.listEmpty=!0,this.totalPages=1)}catch(s){u().error(s)}},getItemId(e){this.deleteItemModal=!0,this.itemId=e},editItem(e){this.$router.push({name:"Project",params:{projectId:e}})},async deleteItem(){var e=new FormData;e.append("project_id",this.itemId);try{const s=await x.post(`${k}/project-remove`,e);s.success===1?(u().success(s.message),this.projectData(),this.deleteItemModal=!1):(u().error(s.message),this.deleteItemModal=!1)}catch(s){u().error(s)}}}},g=e=>(I("data-v-3cdab31d"),e=e(),v(),e),wt=g(()=>t("div",{class:"w-100 margin-bottom_12px"},[t("h2",{class:"title"},"Project List")],-1)),It={class:"table-options"},vt=g(()=>t("img",{src:A},null,-1)),St={key:0},Dt={key:1},Lt={class:"table-options table-grid"},Ct=g(()=>t("img",{src:O},null,-1)),$t={key:0,class:"w-100 user-table"},Bt=g(()=>t("tr",null,[t("td",{class:"count"},[t("p",{class:"text-base_semibold color-Grey_50"},"No.")]),t("td",{class:"project_name"},[t("p",{class:"text-base_semibold color-Grey_50"},"Project Name")]),t("td",{class:"project_stuactur"},[t("p",{class:"text-base_semibold color-Grey_50"},"Project Structure No.")]),t("td",{class:"project_address"},[t("p",{class:"text-base_semibold color-Grey_50"},"Project Address")]),t("td",{class:"blank"}),t("td",{class:"dropdown"},[t("div",{class:"icon-btn icon-btn_32px custom-dropdown"})])],-1)),Et={key:1,class:"data-not-found border-b border-Grey_20 border-solid"},Gt=g(()=>t("img",{src:W},null,-1)),Mt=[Gt];function Nt(e,s,c,S,o,l){const i=p("SearchBox"),_=p("ProjectListRow"),P=p("Pagination"),D=p("ContentSection"),L=p("Layout"),C=p("DeleteModel");return r(),a(m,null,[h(L,{breadcrumb:o.breadcrumbList},{default:b(()=>[h(D,null,{"table-header":b(()=>[wt,t("div",It,[t("button",{class:"btn-regular display-flex align-center gap-8px",onClick:s[0]||(s[0]=y=>l.changesort())},[vt,o.sort==="asc"?(r(),a("span",St,"Newest")):d("",!0),o.sort==="desc"?(r(),a("span",Dt,"Oldest")):d("",!0)])]),t("div",Lt,[h(i,{placeholder:"Search Project",value:o.searchText,onInput:l.searchTextFun,onClear_search:l.clearSearch},null,8,["value","onInput","onClear_search"]),t("button",{class:"btn-regular display-flex align-center w-100 gap-8px text-no-wrap",onClick:s[1]||(s[1]=y=>l.addProjectFun())},[Ct,E(" Add New Project")])])]),"main-table":b(()=>[o.listEmpty?d("",!0):(r(),a("table",$t,[t("tbody",null,[Bt,h(_,{list:o.list,onDelete_item:l.getItemId,onEdit_item:l.editItem,loading:o.listLoading},null,8,["list","onDelete_item","onEdit_item","loading"])])])),o.listEmpty?(r(),a("div",Et,Mt)):d("",!0)]),"table-footer":b(()=>[h(P,{currentPage:o.currentPage,totalPages:o.totalPages,onUpdatePage:l.updatePage},null,8,["currentPage","totalPages","onUpdatePage"])]),_:1})]),_:1},8,["breadcrumb"]),o.deleteItemModal?(r(),B(C,{key:0,model_title:"Delete Project",model_subtitle:"Are you sure you want to delete this Project?",onClose_model:s[2]||(s[2]=y=>o.deleteItemModal=!1),onDelete_item:s[3]||(s[3]=y=>l.deleteItem())})):d("",!0)],64)}const Ht=w(kt,[["render",Nt],["__scopeId","data-v-3cdab31d"]]);export{Ht as default};
