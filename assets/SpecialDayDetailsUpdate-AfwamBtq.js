import{o as n,c as _,a,t as w,U as C,u as N,k as I,l as b,d as c,i as g,r as d,h as l,e as f,n as y,w as k}from"./index-rUHQi0PA.js";import{L as x}from"./Layout-KiF4WUBz.js";import{_ as D}from"./_plugin-vue_export-helper-x3n3nnut.js";import{C as E}from"./CustomLabel-4MzyYwt8.js";import{C as L}from"./CustomInput-at6mwanT.js";import{E as $}from"./ErrorMessage-JYh5Kwt5.js";import"./OverLaye-Atv8c0rd.js";const A={props:{title:String}},B={class:"bg-white rounded-regualr border border-solid border-Grey_20 padding-y_24px padding-x_32px"},M={class:"display-block w-100 margin-bottom_18px"},U={class:"text-xl_semibold color-Grey_90 text-capitalize"};function q(s,e,r,i,t,p){return n(),_("div",B,[a("div",M,[a("h2",U,w(r.title),1)]),C(s.$slots,"default")])}const T=D(A,[["render",q]]),S="http://64.227.168.246:5000/admin",V={components:{Layout:x,ContentSection2:T,CustomLabel:E,CustomInput:L,ErrorMessage:$},data(){return{authStore:"",alertStore:"",planName:"",planPrice:"",planDate:"",formSubmitted:!1,showError:"",itemId:"",itemName:"",loading:!1,breadcrumbList:[{name:"Dashboard",link:"/"},{name:"setting",link:"/settings"},{name:"Add Special Day"}]}},created(){this.authStore=N(),this.alertStore=I(),this.itemId=this.$router.prams,this.$route.params.id&&(this.planId=this.$route.params.id,this.fetchPlanDetails()),this.$route.params.name&&(this.itemName=this.$route.params.name)},computed:{pageTitle(){return this.$route.params.id?`Edit Special Day - ${this.itemName}`:"Add New Special Day"}},methods:{async fetchPlanDetails(){if(this.planId){var s=new FormData;s.append("spcl_id",this.planId);try{const e=await b.post(`${S}/day-details`,s);this.planName=e.data.name,this.planPrice=e.data.price,this.planDate=e.data.date}catch(e){this.alertStore.error(e)}}},async updatePrice(){if(this.formSubmitted=!0,this.loading=!0,this.planName.trim()&&this.planDate&&this.planPrice){const s=new Date,e=new Date(this.planDate);if(s.setHours(0,0,0,0),e<s){this.alertStore.error("Please select today's date or a future date for the plan."),this.loading=!1;return}const r=new FormData;this.itemId&&r.append("spcl_id",this.itemId),r.append("name",this.planName),r.append("date",this.planDate),r.append("price",this.planPrice);try{const i=await b.post(`${S}/add-special-day`,r);i.success===1?(this.formSubmitted=!1,this.alertStore.success(i.message),await new Promise(t=>setTimeout(t,800)),this.planName="",this.planPrice="",this.planDate="",this.loading=!1,this.$router.push({name:"specialPlan"})):(this.loading=!1,this.alertStore.error(i.message))}catch(i){this.loading=!1,this.alertStore.error(i)}finally{this.loading=!1}}else this.loading=!1}}},z={class:"grid grid-cols-2 gap-6"},F={class:"space-y-1.5"},G=a("div",null,null,-1),j={class:"space-y-1.5"},H={class:"space-y-1.5"},W={class:"pt-8"},J={class:"flex items-stretch justify-end w-full gap-1.5"},K=["disabled"],O=["disabled"];function Q(s,e,r,i,t,p){const u=d("CustomLabel"),m=d("CustomInput"),h=d("ErrorMessage"),v=d("ContentSection2"),P=d("Layout");return n(),c(P,{breadcrumb:t.breadcrumbList},{default:g(()=>[l(v,{title:p.pageTitle},{default:g(()=>[a("form",{onSubmit:e[3]||(e[3]=k((...o)=>p.updatePrice&&p.updatePrice(...o),["prevent"]))},[a("div",z,[a("div",F,[l(u,{label:"Day",required:"true"}),l(m,{id:"Day",placeholder:"Ex. Christmas",value:t.planName,onInput:e[0]||(e[0]=o=>t.planName=o.target.value)},null,8,["value"]),!this.planName&&t.formSubmitted?(n(),c(h,{key:0})):f("",!0)]),G,a("div",j,[l(u,{label:"Price per hour",required:"true"}),l(m,{type:"number",id:"Price per hour",placeholder:"Enter special hourly rate here...",value:t.planPrice,onInput:e[1]||(e[1]=o=>t.planPrice=o.target.value)},null,8,["value"]),!this.planPrice&&t.formSubmitted?(n(),c(h,{key:0})):f("",!0)]),a("div",H,[l(u,{label:"Select Date",required:"true"}),l(m,{type:"date",id:"Select Date",placeholder:"Select Date here..",value:t.planDate,onInput:e[2]||(e[2]=o=>t.planDate=o.target.value)},null,8,["value"]),!this.planDate&&t.formSubmitted?(n(),c(h,{key:0})):f("",!0)])]),a("div",W,[a("div",J,[s.$route.params.id?(n(),_("button",{key:1,type:"submit",class:y(["btn-regular",{"is-loading":t.loading}]),disabled:t.loading},"Update",10,O)):(n(),_("button",{key:0,type:"submit",class:y(["btn-regular",{"is-loading":t.loading}]),disabled:t.loading},"Save",10,K))])])],32)]),_:1},8,["title"])]),_:1},8,["breadcrumb"])}const se=D(V,[["render",Q]]);export{se as default};
