import{o as n,d as i,F as g,e as w,f as c,a as t,t as m,p as S,g as P,u as T,h as v,i as x,r as _,j as u,w as I,c as G}from"./index-78b395c4.js";import{L,D as B}from"./Layout-2b061d19.js";import{C as E,S as F,P as A,_ as U}from"./adjustments-0a4ad8f3.js";import{_ as j,a as R}from"./trash-bad6200c.js";import{_ as V}from"./edit-51d5eb37.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import{T as z}from"./TextArea-91f42765.js";import"./OverLaye-908016db.js";import"./search-0186349c.js";const q={props:{list:Array,loading:Boolean},methods:{deleteItem(e){this.$emit("delete_item",e)},editItem(e){this.$emit("edit_item",e)},editStatus(e,o){this.$emit("edit_status",e,o)},editReminder(e){this.$router.push({name:"AddReminder",params:{reminderId:e}})}}},l=e=>(S("data-v-3504e1f4"),e=e(),P(),e),W={key:0},H=l(()=>t("td",{class:"count skeleton-element"},null,-1)),J=l(()=>t("td",{class:"user_name skeleton-element"},null,-1)),K=l(()=>t("td",{class:"user_email skeleton-element"},null,-1)),Q=l(()=>t("td",{class:"user_address skeleton-element"},null,-1)),X=l(()=>t("td",{class:"blank"},null,-1)),Y=l(()=>t("td",{class:"user-status skeleton-element"},null,-1)),Z=l(()=>t("td",{class:"dropdown skeleton-element"},null,-1)),tt=[H,J,K,Q,X,Y,Z],et={key:0},ot={class:"count"},st={class:"gap-8px text-base_semibold color-Grey_90"},at={class:"user_name"},nt={class:"text-base_semibold color-Grey_90"},it={class:"user_email"},rt={class:"text-base_semibold color-Grey_90"},dt={class:"user_address"},lt={class:"text-base_semibold color-Grey_90 line-clamp-1"},ct=l(()=>t("td",{class:"blank"},null,-1)),pt={class:"user-status"},_t={key:0,class:"btn-regular display-flex align-center gap-8px"},ut=l(()=>t("div",{class:"ellipse-dot bg-rose"},null,-1)),ht={class:"text-sm_medium color-Grey_60 capitalize"},mt={key:1,class:"btn-regular display-flex align-center gap-8px"},gt=l(()=>t("div",{class:"ellipse-dot bg-emerald"},null,-1)),bt={class:"text-sm_medium color-Grey_60 capitalize"},yt={class:"dropdown"},vt={class:"icon-btn icon-btn_32px custom-dropdown"},xt=l(()=>t("img",{src:j},null,-1)),ft={class:"custom-dropdown-list leftside icon-dropdown"},It=["onClick"],kt=l(()=>t("div",{class:"dropdown-link"},[t("img",{src:V}),t("p",{class:"dropdown-link-title"}," Edit Operation ")],-1)),wt=[kt],St=["onClick"],Pt=l(()=>t("div",{class:"dropdown-link"},[t("img",{src:R}),t("p",{class:"dropdown-link-title required"}," Delete Operation ")],-1)),Ot=[Pt],Dt=["onClick"],Ct=l(()=>t("div",{class:"dropdown-link"},[t("p",{class:"w20"}),t("p",{class:"dropdown-link-title"}," Pending ")],-1)),Nt=[Ct],Mt=["onClick"],$t=l(()=>t("div",{class:"dropdown-link"},[t("p",{class:"w20"}),t("p",{class:"dropdown-link-title"}," complete ")],-1)),Tt=[$t];function Gt(e,o,s,b,r,d){return n(),i(g,null,[(n(),i(g,null,w(6,(a,h)=>(n(),i(g,{key:h},[s.loading?(n(),i("tr",W,tt)):c("",!0)],64))),64)),(n(!0),i(g,null,w(s.list,(a,h)=>(n(),i(g,{key:h},[s.loading?c("",!0):(n(),i("tr",et,[t("td",ot,[t("p",st,m(h+1),1)]),t("td",at,[t("p",nt,m(a.opern_inv),1)]),t("td",it,[t("p",rt,m(a.opern_date),1)]),t("td",dt,[t("p",lt,m(a.opern_notes),1)]),ct,t("td",pt,[a.opern_status_id===1?(n(),i("button",_t,[ut,t("p",ht,m(a.opern_status),1)])):c("",!0),a.opern_status_id===2?(n(),i("button",mt,[gt,t("p",bt,m(a.opern_status),1)])):c("",!0)]),t("td",yt,[t("div",vt,[xt,t("ul",ft,[t("li",{class:"dropdown-item",onClick:y=>d.editItem(a.opern_id)},wt,8,It),t("li",{class:"dropdown-item",onClick:y=>d.deleteItem(a.opern_id)},Ot,8,St),a.opern_status_id===2&&a.opern_status_id!==2?(n(),i("li",{key:0,class:"dropdown-item",onClick:y=>d.editStatus(a.opern_id,1)},Nt,8,Dt)):c("",!0),a.opern_status_id===1?(n(),i("li",{key:1,class:"dropdown-item",onClick:y=>d.editStatus(a.opern_id,2)},Tt,8,Mt)):c("",!0)])])])]))],64))),128))],64)}const Lt=O(q,[["render",Gt],["__scopeId","data-v-3504e1f4"]]);const f="https://devapi.billionbuild.com",Bt={components:{Layout:L,ContentSection:E,SearchBox:F,Pagination:A,Operations:Lt,DeleteModel:B,TextArea:z},data(){return{list:[],searchText:"",currentPage:1,totalPages:1,sort:"asc",deleteItemModal:!1,itemId:"",operationModal:!1,operationNote:"",operationId:"",operationInvId:"",operationType:"",operationProId:"",listLoading:!1,listEmpty:!1}},computed:{addOperationBtn(){return!this.operationNote.trim()}},created(){this.operationData();const e=T(),o="Operations |  Billion Build",s="this is description for Operations";e.chnageTitle(o,s)},methods:{searchTextFun(e){this.searchText=e.target.value.trim(),this.operationData()},updatePage(e){this.currentPage=e,this.operationData()},changesort(){this.sort=this.sort==="desc"?"asc":"desc",this.operationData()},async operationData(){this.listLoading=!0,this.listEmpty=!1;var e=new FormData;e.append("operation_id",""),e.append("sort",this.sort),e.append("search",this.searchText),e.append("page_no",this.currentPage);try{const o=await v.post(`${f}/operation-list`,e);o.data.length!==0?(this.listLoading=!1,this.list=o.data,this.totalPages=o.total_pages):(this.listEmpty=!0,this.totalPages=1)}catch(o){x().error(o)}},async statusUpdate(e,o){var s=new FormData;s.append("operation_id",e),s.append("operation_status",o);try{(await v.post(`${f}/operation-status`,s)).success===1&&this.operationData()}catch(b){x().error(b)}},getItemId(e){this.deleteItemModal=!0,this.itemId=e},async editItem(e){this.operationModal=!0,this.operationId=e;var o=new FormData;o.append("operation_id",this.operationId),o.append("search",this.searchText),o.append("page_no",this.currentPage);try{const s=await v.post(`${f}/operation-list`,o);this.operationNote=s.data.opern_notes,this.operationInvId=s.data.opern_inv_id,this.operationType=s.data.opern_type,this.operationProId=s.data.opern_proj,this.totalPages=s.total_pages}catch(s){x().error(s)}},async addOperation(){var e=new FormData;e.append("inventory_id",this.operationInvId),e.append("operation_id",this.operationId),e.append("operation_notes",this.operationNote),e.append("operation_type",this.operationType),e.append("project_id",this.operationProId);try{(await v.post(`${f}/add-operation`,e)).success===1&&(this.operationModal=!1,this.operationId="",this.operationNote="",this.operationInvId="",this.operationType="",this.operationProId="",this.operationData())}catch(o){x().error(o)}},async deleteItem(){var e=new FormData;e.append("operation_id",this.itemId);try{(await v.post(`${f}/remove-operation`,e)).success===1&&(this.operationData(),this.deleteItemModal=!1)}catch(o){x().error(o)}}}},k=e=>(S("data-v-7f40cb43"),e=e(),P(),e),Et=k(()=>t("div",{class:"w-100 margin-bottom_12px"},[t("h2",{class:"title"},"Operation List")],-1)),Ft={class:"table-options"},At=k(()=>t("img",{src:U},null,-1)),Ut={key:0},jt={key:1},Rt={class:"table-options"},Vt={class:"w-100 user-table"},zt=k(()=>t("tr",null,[t("td",{class:"count"},[t("p",{class:"text-base_semibold color-Grey_50"},"No.")]),t("td",{class:"user_name"},[t("p",{class:"text-base_semibold color-Grey_50"}," Operation Name")]),t("td",{class:"user_email"},[t("p",{class:"text-base_semibold color-Grey_50"},"Operation Date")]),t("td",{class:"user_address"},[t("p",{class:"text-base_semibold color-Grey_50 line-clamp-1"},"Operation Note")]),t("td",{class:"blank"}),t("td",{class:"user-status"},[t("p",{class:"text-base_semibold color-Grey_50 line-clamp-1"},"Operation Status")]),t("td",{class:"dropdown"},[t("div",{class:"icon-btn icon-btn_32px custom-dropdown"})])],-1)),qt={key:0,class:"status-chnageBox"},Wt={class:"w-full border border-solid border-Grey_20 rounded-regualr bg-white"},Ht=k(()=>t("div",{class:"w-full border-b border-solid border-Gray_20"},[t("div",{class:"padding-y_8px padding-x_16px"},[t("h4",null,"Edit Operation")])],-1)),Jt={class:"padding-y_12px padding-x_16px space-y-4"},Kt={class:"space-y-4px"},Qt={class:"w-full border-t border-solid border-Gray_20"},Xt={class:"padding-y_8px padding-x_16px flex items-center justify-end gap-8px"},Yt=["disabled"];function Zt(e,o,s,b,r,d){const a=_("SearchBox"),h=_("Operations"),y=_("Pagination"),D=_("ContentSection"),C=_("Label"),N=_("TextArea"),M=_("Layout"),$=_("DeleteModel");return n(),i(g,null,[u(M,null,{default:I(()=>[u(D,null,{"table-header":I(()=>[Et,t("div",Ft,[t("button",{class:"btn-regular display-flex align-center gap-8px",onClick:o[0]||(o[0]=p=>d.changesort())},[At,r.sort==="asc"?(n(),i("span",Ut,"Newest")):c("",!0),r.sort==="desc"?(n(),i("span",jt,"Oldest")):c("",!0)])]),t("div",Rt,[u(a,{placeholder:"Search Note",value:r.searchText,onInput:d.searchTextFun},null,8,["value","onInput"])])]),"main-table":I(()=>[t("table",Vt,[t("tbody",null,[zt,u(h,{list:r.list,onDelete_item:d.getItemId,onEdit_item:d.editItem,onEdit_status:d.statusUpdate,loading:r.listLoading},null,8,["list","onDelete_item","onEdit_item","onEdit_status","loading"])])])]),"table-footer":I(()=>[u(y,{currentPage:r.currentPage,totalPages:r.totalPages,onUpdatePage:d.updatePage},null,8,["currentPage","totalPages","onUpdatePage"])]),_:1}),r.operationModal?(n(),i("div",qt,[t("div",Wt,[Ht,t("div",Jt,[t("div",Kt,[u(C,{label:"operatio Note"}),u(N,{placeholder:"Enter operatio Note",id:"operatio Note",value:r.operationNote,onInput:o[1]||(o[1]=p=>r.operationNote=p.target.value)},null,8,["value"])])]),t("div",Qt,[t("div",Xt,[t("button",{class:"btn-regular",onClick:o[2]||(o[2]=p=>this.operationModal=!this.operationModal)},"Cancel"),t("button",{class:"btn-regular bg-purple color-white",disabled:d.addOperationBtn,onClick:o[3]||(o[3]=(...p)=>d.addOperation&&d.addOperation(...p))},"Save Operation",8,Yt)])])])])):c("",!0),r.operationModal?(n(),i("div",{key:1,class:"overlay",onClick:o[4]||(o[4]=p=>this.operationModal=!this.operationModal)})):c("",!0)]),_:1}),r.deleteItemModal?(n(),G($,{key:0,model_title:"Delete Operation",model_subtitle:"Are you sure you want to delete this Operation?",onClose_model:o[5]||(o[5]=p=>r.deleteItemModal=!1),onDelete_item:o[6]||(o[6]=p=>d.deleteItem())})):c("",!0)],64)}const le=O(Bt,[["render",Zt],["__scopeId","data-v-7f40cb43"]]);export{le as default};
