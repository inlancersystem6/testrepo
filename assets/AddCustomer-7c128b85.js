import{u as E,h as A,i as v,r as d,o as l,c as u,w as h,j as r,a as i,f as c,n as f,d as g,p as I,g as x}from"./index-38024ad5.js";import{L}from"./Layout-200f36b8.js";import{C as S}from"./ContentSection2-f1f538fa.js";import{L as C}from"./Label-dfa7b7c9.js";import{I as k}from"./Input-13b1a54a.js";import{E as F}from"./ErrorMessage-8c215241.js";import{T as R}from"./TextArea-abd90eb3.js";import{_ as M}from"./noimg-c49b4ac6.js";import{_ as w}from"./plus-3-0d8d5401.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import"./OverLaye-d6a130a2.js";const B="https://devapi.billionbuild.com",P={components:{Layout:L,ContentSection:S,Label:C,Input:k,ErrorMessage:F,TextArea:R},data(){return{customerFirstName:"",customerLastName:"",customerEmail:"",customerNumber:"",profilePic:"",customerAddress:"",selectedImg:"",formSubmitted:!1,isvalidEmail:!0,customerMiddleName:"",customerDob:"",customerNote:"",customerReference:"",activeAcco:"0",showErrorOfImg:""}},computed:{btnDisabled(){const s=/[!@#$%^&*()?":{}|<>]/;return!this.customerFirstName.trim()||!this.customerLastName.trim()||!this.customerNumber.trim()||this.customerNumber.trim().length!==10||!this.isvalidEmail||!this.customerAddress.trim()||s.test(this.customerAddress)}},created(){const s=E(),e="Add Customer |  Billion Build",_="this is description for Add Customer";s.chnageTitle(e,_)},methods:{validateEmail(){const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return this.customerEmail.trim()===""||s.test(this.customerEmail)?(this.isvalidEmail=!0,!0):(this.isvalidEmail=!1,!1)},selectedPic(s){const e=s.target.files[0];e.type==="image/png"||e.type==="image/jpeg"||e.type==="image/gif"||e.type==="image/svg"||e.type==="image/jpg"?(this.profilePic=e,this.selectedImg=URL.createObjectURL(e),this.activeAcco=1,this.showErrorOfImg=!1):this.showErrorOfImg=!0},async addcustomer(){var s=new FormData;s.append("cus_first_name",this.customerFirstName),s.append("cus_last_name",this.customerLastName),s.append("cus_email",this.customerEmail),s.append("cus_phone_no",this.customerNumber),s.append("cus_profile",this.profilePic),s.append("cus_address",this.customerAddress),s.append("cus_middle_name",this.customerMiddleName),s.append("cus_dob",this.customerDob),s.append("cus_notes",this.customerNote),s.append("cus_ref",this.customerReference);try{const e=await A.post(`${B}/add-or-edit-customer`,s);e.success===1?this.$router.push({name:"CustomerList"}):v().error(e.message)}catch(e){v().error(e)}},toggleAccordion(s){this.activeAcco===s?this.activeAcco=null:this.activeAcco=s}}},O=s=>(I("data-v-d0829f09"),s=s(),x(),s),T={class:"row"},j={class:"col-8"},U={class:"address-form"},V={class:"space-y-8px"},z={class:"space-y-8px"},W={class:"space-y-8px"},q={class:"space-y-8px"},G={class:"space-y-8px"},H={class:"space-y-8px"},J={class:"space-y-8px"},K={class:"space-y-8px col-span-2"},Q={class:"space-y-8px col-span-2"},X=["disabled"],Y={class:"col-2"},Z={class:"user_pic"},$=["src"],ee={key:1,src:M,class:"pic"},te={class:"add_pic",for:"customer-pic"},se=O(()=>i("img",{src:w},null,-1));function oe(s,e,_,re,t,p){const m=d("Label"),a=d("Input"),n=d("ErrorMessage"),b=d("TextArea"),N=d("ContentSection"),y=d("Layout");return l(),u(y,null,{default:h(()=>[r(N,{title:"Add Customer"},{default:h(()=>[i("div",T,[i("div",j,[i("div",U,[i("div",V,[r(m,{label:"First Name"}),r(a,{placeholder:"Enter customer First Name",id:"First Name",value:t.customerFirstName,onInput:e[0]||(e[0]=o=>t.customerFirstName=o.target.value)},null,8,["value"]),!t.customerFirstName&&t.formSubmitted?(l(),u(n,{key:0,msg:""})):c("",!0)]),i("div",z,[r(m,{label:"Middle Name (optional)"}),r(a,{placeholder:"Enter customer Middle Name",id:"Middle Name (optional)",value:t.customerMiddleName,onInput:e[1]||(e[1]=o=>t.customerMiddleName=o.target.value)},null,8,["value"])]),i("div",W,[r(m,{label:"Last Name"}),r(a,{placeholder:"Enter customer Last Name",id:"Last Name",value:t.customerLastName,onInput:e[2]||(e[2]=o=>t.customerLastName=o.target.value)},null,8,["value"]),!t.customerLastName&&t.formSubmitted?(l(),u(n,{key:0,msg:""})):c("",!0)]),i("div",q,[r(m,{label:"Email (optional)"}),r(a,{placeholder:"Enter customer Email",id:"Email (optional)",value:t.customerEmail,onInput:e[3]||(e[3]=o=>{t.customerEmail=o.target.value,t.isvalidEmail=p.validateEmail()}),class:f({input_error:!t.isvalidEmail})},null,8,["value","class"]),t.isvalidEmail?c("",!0):(l(),u(n,{key:0,msg:"Invalid email"})),!t.customerEmail&&t.formSubmitted?(l(),u(n,{key:1,msg:""})):c("",!0)]),i("div",G,[r(m,{label:"Phone No."}),r(a,{placeholder:"Enter customer Number",id:"Phone No.",value:t.customerNumber,onInput:e[4]||(e[4]=o=>t.customerNumber=o.target.value),type:"number",class:f({input_error:t.customerNumber.length>10})},null,8,["value","class"]),!t.customerNumber&&t.formSubmitted?(l(),u(n,{key:0,msg:""})):c("",!0),t.customerNumber.length>10?(l(),u(n,{key:1,msg:"Only 10 number valid"})):c("",!0)]),i("div",H,[r(m,{label:"Date Of Birth (optional)"}),r(a,{id:"Date Of Birth (optional)",value:t.customerDob,onInput:e[5]||(e[5]=o=>t.customerDob=o.target.value),type:"date"},null,8,["value"])]),i("div",J,[r(m,{label:"Reference (optional)"}),r(a,{id:"Reference (optional)",placeholder:"Enter customer Reference",value:t.customerReference,onInput:e[6]||(e[6]=o=>t.customerReference=o.target.value),type:"text"},null,8,["value"])]),i("div",K,[r(m,{label:"Address"}),r(a,{id:"Address",placeholder:"Enter customer Address",value:t.customerAddress,onInput:e[7]||(e[7]=o=>t.customerAddress=o.target.value),type:"text"},null,8,["value"]),!t.customerAddress&&t.formSubmitted?(l(),u(n,{key:0,msg:""})):c("",!0)]),i("div",Q,[r(m,{label:"Note (optional)"}),r(b,{placeholder:"Enter customer Note",id:"Note (optional)",value:t.customerNote,onInput:e[8]||(e[8]=o=>t.customerNote=o.target.value)},null,8,["value"])]),i("button",{type:"submit",class:"btn-regular margin-top_8px",disabled:p.btnDisabled,onClick:e[9]||(e[9]=o=>p.addcustomer())},"Save",8,X)])]),i("div",Y,[i("div",Z,[t.selectedImg?(l(),g("img",{key:0,src:this.selectedImg,class:"pic"},null,8,$)):c("",!0),t.selectedImg?c("",!0):(l(),g("img",ee)),i("label",te,[i("input",{type:"file",id:"customer-pic",onChange:e[10]||(e[10]=(...o)=>p.selectedPic&&p.selectedPic(...o))},null,32),se])])])])]),_:1})]),_:1})}const he=D(P,[["render",oe],["__scopeId","data-v-d0829f09"]]);export{he as default};
